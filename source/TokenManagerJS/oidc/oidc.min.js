(function(){function et(n){for(var i,r="",t=0;t+3<=n.length;t+=3)i=parseInt(n.substring(t,t+3),16),r+=rt.charAt(i>>6)+rt.charAt(i&63);if(t+1==n.length?(i=parseInt(n.substring(t,t+1),16),r+=rt.charAt(i<<2)):t+2==n.length&&(i=parseInt(n.substring(t,t+2),16),r+=rt.charAt(i>>2)+rt.charAt((i&3)<<4)),ei)while((r.length&3)>0)r+=ei;return r}function tt(n){for(var i="",r=0,u,t,f=0;f<n.length;++f){if(n.charAt(f)==ei)break;(t=rt.indexOf(n.charAt(f)),t<0)||(r==0?(i+=y(t>>2),u=t&3,r=1):r==1?(i+=y(u<<2|t>>4),u=t&15,r=2):r==2?(i+=y(u),i+=y(t>>2),u=t&3,r=3):(i+=y(u<<2|t>>4),i+=y(t&15),r=0))}return r==1&&(i+=y(u<<2)),i}function n(n,t,i){n!=null&&("number"==typeof n?this.fromNumber(n,t,i):t==null&&"string"!=typeof n?this.fromString(n,256):this.fromString(n,t))}function r(){return new n(null)}function yr(n,t,i,r,u,f){while(--f>=0){var e=t*this[n++]+i[r]+u;u=Math.floor(e/67108864);i[r++]=e&67108863}return u}function pr(n,t,i,r,u,f){for(var o=t&32767,s=t>>15;--f>=0;){var e=this[n]&32767,h=this[n++]>>15,c=s*e+h*o;e=o*e+((c&32767)<<15)+i[r]+(u&1073741823);u=(e>>>30)+(c>>>15)+s*h+(u>>>30);i[r++]=e&1073741823}return u}function wr(n,t,i,r,u,f){for(var o=t&16383,s=t>>14;--f>=0;){var e=this[n]&16383,h=this[n++]>>14,c=s*e+h*o;e=o*e+((c&16383)<<14)+i[r]+u;u=(e>>28)+(c>>14)+s*h;i[r++]=e&268435455}return u}function y(n){return ur.charAt(n)}function si(n,t){var i=ht[n.charCodeAt(t)];return i==null?-1:i}function br(n){for(var t=this.t-1;t>=0;--t)n[t]=this[t];n.t=this.t;n.s=this.s}function kr(n){this.t=1;this.s=n<0?-1:0;n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0}function w(n){var t=r();return t.fromInt(n),t}function dr(t,i){var u,f;if(i==16)u=4;else if(i==8)u=3;else if(i==256)u=8;else if(i==2)u=1;else if(i==32)u=5;else if(i==4)u=2;else{this.fromRadix(t,i);return}this.t=0;this.s=0;for(var e=t.length,o=!1,r=0;--e>=0;){if(f=u==8?t[e]&255:si(t,e),f<0){t.charAt(e)=="-"&&(o=!0);continue}o=!1;r==0?this[this.t++]=f:r+u>this.DB?(this[this.t-1]|=(f&(1<<this.DB-r)-1)<<r,this[this.t++]=f>>this.DB-r):this[this.t-1]|=f<<r;r+=u;r>=this.DB&&(r-=this.DB)}u==8&&(t[0]&128)!=0&&(this.s=-1,r>0&&(this[this.t-1]|=(1<<this.DB-r)-1<<r));this.clamp();o&&n.ZERO.subTo(this,this)}function gr(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t}function nu(n){var t;if(this.s<0)return"-"+this.negate().toString(n);if(n==16)t=4;else if(n==8)t=3;else if(n==2)t=1;else if(n==32)t=5;else if(n==4)t=2;else return this.toRadix(n);var o=(1<<t)-1,u,f=!1,e="",r=this.t,i=this.DB-r*this.DB%t;if(r-->0)for(i<this.DB&&(u=this[r]>>i)>0&&(f=!0,e=y(u));r>=0;)i<t?u=(this[r]&(1<<i)-1)<<t-i|this[--r]>>(i+=this.DB-t):(u=this[r]>>(i-=t)&o,i<=0&&(i+=this.DB,--r)),u>0&&(f=!0),f&&(e+=y(u));return f?e:"0"}function tu(){var t=r();return n.ZERO.subTo(this,t),t}function iu(){return this.s<0?this.negate():this}function ru(n){var t=this.s-n.s,i;if(t!=0)return t;if(i=this.t,t=i-n.t,t!=0)return this.s<0?-t:t;while(--i>=0)if((t=this[i]-n[i])!=0)return t;return 0}function vt(n){var i=1,t;return(t=n>>>16)!=0&&(n=t,i+=16),(t=n>>8)!=0&&(n=t,i+=8),(t=n>>4)!=0&&(n=t,i+=4),(t=n>>2)!=0&&(n=t,i+=2),(t=n>>1)!=0&&(n=t,i+=1),i}function uu(){return this.t<=0?0:this.DB*(this.t-1)+vt(this[this.t-1]^this.s&this.DM)}function fu(n,t){for(var i=this.t-1;i>=0;--i)t[i+n]=this[i];for(i=n-1;i>=0;--i)t[i]=0;t.t=this.t+n;t.s=this.s}function eu(n,t){for(var i=n;i<this.t;++i)t[i-n]=this[i];t.t=Math.max(this.t-n,0);t.s=this.s}function ou(n,t){for(var u=n%this.DB,e=this.DB-u,o=(1<<e)-1,r=Math.floor(n/this.DB),f=this.s<<u&this.DM,i=this.t-1;i>=0;--i)t[i+r+1]=this[i]>>e|f,f=(this[i]&o)<<u;for(i=r-1;i>=0;--i)t[i]=0;t[r]=f;t.t=this.t+r+1;t.s=this.s;t.clamp()}function su(n,t){var i,r;if(t.s=this.s,i=Math.floor(n/this.DB),i>=this.t){t.t=0;return}var u=n%this.DB,f=this.DB-u,e=(1<<u)-1;for(t[0]=this[i]>>u,r=i+1;r<this.t;++r)t[r-i-1]|=(this[r]&e)<<f,t[r-i]=this[r]>>u;u>0&&(t[this.t-i-1]|=(this.s&e)<<f);t.t=this.t-i;t.clamp()}function hu(n,t){for(var r=0,i=0,u=Math.min(n.t,this.t);r<u;)i+=this[r]-n[r],t[r++]=i&this.DM,i>>=this.DB;if(n.t<this.t){for(i-=n.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<n.t;)i-=n[r],t[r++]=i&this.DM,i>>=this.DB;i-=n.s}t.s=i<0?-1:0;i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i);t.t=r;t.clamp()}function cu(t,i){var u=this.abs(),f=t.abs(),r=u.t;for(i.t=r+f.t;--r>=0;)i[r]=0;for(r=0;r<f.t;++r)i[r+u.t]=u.am(0,f[r],i,r,0,u.t);i.s=0;i.clamp();this.s!=t.s&&n.ZERO.subTo(i,i)}function lu(n){for(var i=this.abs(),t=n.t=2*i.t,r;--t>=0;)n[t]=0;for(t=0;t<i.t-1;++t)r=i.am(t,i[t],n,2*t,0,1),(n[t+i.t]+=i.am(t+1,2*i[t],n,2*t+1,r,i.t-t-1))>=i.DV&&(n[t+i.t]-=i.DV,n[t+i.t+1]=1);n.t>0&&(n[n.t-1]+=i.am(t,i[t],n,2*t,0,1));n.s=0;n.clamp()}function au(t,i,u){var s=t.abs(),l,e,a,v;if(!(s.t<=0)){if(l=this.abs(),l.t<s.t){i!=null&&i.fromInt(0);u!=null&&this.copyTo(u);return}u==null&&(u=r());var f=r(),p=this.s,b=t.s,c=this.DB-vt(s[s.t-1]);if(c>0?(s.lShiftTo(c,f),l.lShiftTo(c,u)):(s.copyTo(f),l.copyTo(u)),e=f.t,a=f[e-1],a!=0){var w=a*(1<<this.F1)+(e>1?f[e-2]>>this.F2:0),k=this.FV/w,d=(1<<this.F1)/w,g=1<<this.F2,h=u.t,y=h-e,o=i==null?r():i;for(f.dlShiftTo(y,o),u.compareTo(o)>=0&&(u[u.t++]=1,u.subTo(o,u)),n.ONE.dlShiftTo(e,o),o.subTo(f,f);f.t<e;)f[f.t++]=0;while(--y>=0)if(v=u[--h]==a?this.DM:Math.floor(u[h]*k+(u[h-1]+g)*d),(u[h]+=f.am(0,v,u,y,0,e))<v)for(f.dlShiftTo(y,o),u.subTo(o,u);u[h]<--v;)u.subTo(o,u);i!=null&&(u.drShiftTo(e,i),p!=b&&n.ZERO.subTo(i,i));u.t=e;u.clamp();c>0&&u.rShiftTo(c,u);p<0&&n.ZERO.subTo(u,u)}}}function vu(t){var i=r();return this.abs().divRemTo(t,null,i),this.s<0&&i.compareTo(n.ZERO)>0&&t.subTo(i,i),i}function k(n){this.m=n}function yu(n){return n.s<0||n.compareTo(this.m)>=0?n.mod(this.m):n}function pu(n){return n}function wu(n){n.divRemTo(this.m,null,n)}function bu(n,t,i){n.multiplyTo(t,i);this.reduce(i)}function ku(n,t){n.squareTo(t);this.reduce(t)}function du(){var t,n;return this.t<1?0:(t=this[0],(t&1)==0)?0:(n=t&3,n=n*(2-(t&15)*n)&15,n=n*(2-(t&255)*n)&255,n=n*(2-((t&65535)*n&65535))&65535,n=n*(2-t*n%this.DV)%this.DV,n>0?this.DV-n:-n)}function d(n){this.m=n;this.mp=n.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<n.DB-15)-1;this.mt2=2*n.t}function gu(t){var i=r();return t.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),t.s<0&&i.compareTo(n.ZERO)>0&&this.m.subTo(i,i),i}function nf(n){var t=r();return n.copyTo(t),this.reduce(t),t}function tf(n){for(var i,t,r;n.t<=this.mt2;)n[n.t++]=0;for(i=0;i<this.m.t;++i)for(t=n[i]&32767,r=t*this.mpl+((t*this.mph+(n[i]>>15)*this.mpl&this.um)<<15)&n.DM,t=i+this.m.t,n[t]+=this.m.am(0,r,n,i,0,this.m.t);n[t]>=n.DV;)n[t]-=n.DV,n[++t]++;n.clamp();n.drShiftTo(this.m.t,n);n.compareTo(this.m)>=0&&n.subTo(this.m,n)}function rf(n,t){n.squareTo(t);this.reduce(t)}function uf(n,t,i){n.multiplyTo(t,i);this.reduce(i)}function ff(){return(this.t>0?this[0]&1:this.s)==0}function ef(t,i){var e;if(t>4294967295||t<1)return n.ONE;var u=r(),f=r(),o=i.convert(this),s=vt(t)-1;for(o.copyTo(u);--s>=0;)i.sqrTo(u,f),(t&1<<s)>0?i.mulTo(f,o,u):(e=u,u=f,f=e);return i.revert(u)}function of(n,t){var i;return i=n<256||t.isEven()?new k(t):new d(t),this.exp(n,i)}function sf(){var n=r();return this.copyTo(n),n}function hf(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function cf(){return this.t==0?this.s:this[0]<<24>>24}function lf(){return this.t==0?this.s:this[0]<<16>>16}function af(n){return Math.floor(Math.LN2*this.DB/Math.log(n))}function vf(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function yf(n){if(n==null&&(n=10),this.signum()==0||n<2||n>36)return"0";var o=this.chunkSize(n),f=Math.pow(n,o),e=w(f),t=r(),i=r(),u="";for(this.divRemTo(e,t,i);t.signum()>0;)u=(f+i.intValue()).toString(n).substr(1)+u,t.divRemTo(e,t,i);return i.intValue().toString(n)+u}function pf(t,i){var r,e;this.fromInt(0);i==null&&(i=10);var o=this.chunkSize(i),h=Math.pow(i,o),s=!1,f=0,u=0;for(r=0;r<t.length;++r){if(e=si(t,r),e<0){t.charAt(r)=="-"&&this.signum()==0&&(s=!0);continue}u=i*u+e;++f>=o&&(this.dMultiply(h),this.dAddOffset(u,0),f=0,u=0)}f>0&&(this.dMultiply(Math.pow(i,f)),this.dAddOffset(u,0));s&&n.ZERO.subTo(this,this)}function wf(t,i,r){if("number"==typeof i)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(n.ONE.shiftLeft(t-1),gt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(n.ONE.shiftLeft(t-1),this);else{var u=[],f=t&7;u.length=(t>>3)+1;i.nextBytes(u);f>0?u[0]&=(1<<f)-1:u[0]=0;this.fromString(u,256)}}function bf(){var i=this.t,u=[],n,t,r;if(u[0]=this.s,n=this.DB-i*this.DB%8,r=0,i-->0)for(n<this.DB&&(t=this[i]>>n)!=(this.s&this.DM)>>n&&(u[r++]=t|this.s<<this.DB-n);i>=0;)n<8?t=(this[i]&(1<<n)-1)<<8-n|this[--i]>>(n+=this.DB-8):(t=this[i]>>(n-=8)&255,n<=0&&(n+=this.DB,--i)),(t&128)!=0&&(t|=-256),r==0&&(this.s&128)!=(t&128)&&++r,(r>0||t!=this.s)&&(u[r++]=t);return u}function kf(n){return this.compareTo(n)==0}function df(n){return this.compareTo(n)<0?this:n}function gf(n){return this.compareTo(n)>0?this:n}function ne(n,t,i){for(var u,f=Math.min(n.t,this.t),r=0;r<f;++r)i[r]=t(this[r],n[r]);if(n.t<this.t){for(u=n.s&this.DM,r=f;r<this.t;++r)i[r]=t(this[r],u);i.t=this.t}else{for(u=this.s&this.DM,r=f;r<n.t;++r)i[r]=t(u,n[r]);i.t=n.t}i.s=t(this.s,n.s);i.clamp()}function te(n,t){return n&t}function ie(n){var t=r();return this.bitwiseTo(n,te,t),t}function gt(n,t){return n|t}function re(n){var t=r();return this.bitwiseTo(n,gt,t),t}function hi(n,t){return n^t}function ue(n){var t=r();return this.bitwiseTo(n,hi,t),t}function ci(n,t){return n&~t}function fe(n){var t=r();return this.bitwiseTo(n,ci,t),t}function ee(){for(var n=r(),t=0;t<this.t;++t)n[t]=this.DM&~this[t];return n.t=this.t,n.s=~this.s,n}function oe(n){var t=r();return n<0?this.rShiftTo(-n,t):this.lShiftTo(n,t),t}function se(n){var t=r();return n<0?this.lShiftTo(-n,t):this.rShiftTo(n,t),t}function he(n){if(n==0)return-1;var t=0;return(n&65535)==0&&(n>>=16,t+=16),(n&255)==0&&(n>>=8,t+=8),(n&15)==0&&(n>>=4,t+=4),(n&3)==0&&(n>>=2,t+=2),(n&1)==0&&++t,t}function ce(){for(var n=0;n<this.t;++n)if(this[n]!=0)return n*this.DB+he(this[n]);return this.s<0?this.t*this.DB:-1}function le(n){for(var t=0;n!=0;)n&=n-1,++t;return t}function ae(){for(var t=0,i=this.s&this.DM,n=0;n<this.t;++n)t+=le(this[n]^i);return t}function ve(n){var t=Math.floor(n/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<n%this.DB)!=0}function ye(t,i){var r=n.ONE.shiftLeft(t);return this.bitwiseTo(r,i,r),r}function pe(n){return this.changeBit(n,gt)}function we(n){return this.changeBit(n,ci)}function be(n){return this.changeBit(n,hi)}function ke(n,t){for(var r=0,i=0,u=Math.min(n.t,this.t);r<u;)i+=this[r]+n[r],t[r++]=i&this.DM,i>>=this.DB;if(n.t<this.t){for(i+=n.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<n.t;)i+=n[r],t[r++]=i&this.DM,i>>=this.DB;i+=n.s}t.s=i<0?-1:0;i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i);t.t=r;t.clamp()}function de(n){var t=r();return this.addTo(n,t),t}function ge(n){var t=r();return this.subTo(n,t),t}function no(n){var t=r();return this.multiplyTo(n,t),t}function to(){var n=r();return this.squareTo(n),n}function io(n){var t=r();return this.divRemTo(n,t,null),t}function ro(n){var t=r();return this.divRemTo(n,null,t),t}function uo(n){var t=r(),i=r();return this.divRemTo(n,t,i),[t,i]}function fo(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp()}function eo(n,t){if(n!=0){while(this.t<=t)this[this.t++]=0;for(this[t]+=n;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function ot(){}function li(n){return n}function oo(n,t,i){n.multiplyTo(t,i)}function so(n,t){n.squareTo(t)}function ho(n){return this.exp(n,new ot)}function co(n,t,i){var r=Math.min(this.t+n.t,t),u;for(i.s=0,i.t=r;r>0;)i[--r]=0;for(u=i.t-this.t;r<u;++r)i[r+this.t]=this.am(0,n[r],i,r,0,this.t);for(u=Math.min(n.t,t);r<u;++r)this.am(0,n[r],i,r,0,t-r);i.clamp()}function lo(n,t,i){--t;var r=i.t=this.t+n.t-t;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(t-this.t,0);r<n.t;++r)i[this.t+r-t]=this.am(t-r,n[r],i,0,0,this.t+r-t);i.clamp();i.drShiftTo(1,i)}function it(t){this.r2=r();this.q3=r();n.ONE.dlShiftTo(2*t.t,this.r2);this.mu=this.r2.divide(t);this.m=t}function ao(n){if(n.s<0||n.t>2*this.m.t)return n.mod(this.m);if(n.compareTo(this.m)<0)return n;var t=r();return n.copyTo(t),this.reduce(t),t}function vo(n){return n}function yo(n){for(n.drShiftTo(this.m.t-1,this.r2),n.t>this.m.t+1&&(n.t=this.m.t+1,n.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);n.compareTo(this.r2)<0;)n.dAddOffset(1,this.m.t+1);for(n.subTo(this.r2,n);n.compareTo(this.m)>=0;)n.subTo(this.m,n)}function po(n,t){n.squareTo(t);this.reduce(t)}function wo(n,t,i){n.multiplyTo(t,i);this.reduce(i)}function bo(n,t){var i=n.bitLength(),l,u=w(1),e,y;if(i<=0)return u;l=i<18?1:i<48?3:i<144?4:i<768?5:6;e=i<8?new k(t):t.isEven()?new it(t):new d(t);var h=[],f=3,a=l-1,p=(1<<l)-1;if(h[1]=e.convert(this),l>1)for(y=r(),e.sqrTo(h[1],y);f<=p;)h[f]=r(),e.mulTo(y,h[f-2],h[f]),f+=2;var o=n.t-1,c,b=!0,s=r(),v;for(i=vt(n[o])-1;o>=0;){for(i>=a?c=n[o]>>i-a&p:(c=(n[o]&(1<<i+1)-1)<<a-i,o>0&&(c|=n[o-1]>>this.DB+i-a)),f=l;(c&1)==0;)c>>=1,--f;if((i-=f)<0&&(i+=this.DB,--o),b)h[c].copyTo(u),b=!1;else{while(f>1)e.sqrTo(u,s),e.sqrTo(s,u),f-=2;f>0?e.sqrTo(u,s):(v=u,u=s,s=v);e.mulTo(s,h[c],u)}while(o>=0&&(n[o]&1<<i)==0)e.sqrTo(u,s),v=u,u=s,s=v,--i<0&&(i=this.DB-1,--o)}return e.revert(u)}function ko(n){var i=this.s<0?this.negate():this.clone(),t=n.s<0?n.negate():n.clone(),f,u,r;if(i.compareTo(t)<0&&(f=i,i=t,t=f),u=i.getLowestSetBit(),r=t.getLowestSetBit(),r<0)return i;for(u<r&&(r=u),r>0&&(i.rShiftTo(r,i),t.rShiftTo(r,t));i.signum()>0;)(u=i.getLowestSetBit())>0&&i.rShiftTo(u,i),(u=t.getLowestSetBit())>0&&t.rShiftTo(u,t),i.compareTo(t)>=0?(i.subTo(t,i),i.rShiftTo(1,i)):(t.subTo(i,t),t.rShiftTo(1,t));return r>0&&t.lShiftTo(r,t),t}function go(n){var r,t,i;if(n<=0)return 0;if(r=this.DV%n,t=this.s<0?n-1:0,this.t>0)if(r==0)t=this[0]%n;else for(i=this.t-1;i>=0;--i)t=(r*t+this[i])%n;return t}function ns(t){var s=t.isEven();if(this.isEven()&&s||t.signum()==0)return n.ZERO;for(var u=t.clone(),f=this.clone(),e=w(1),r=w(0),o=w(0),i=w(1);u.signum()!=0;){while(u.isEven())u.rShiftTo(1,u),s?(e.isEven()&&r.isEven()||(e.addTo(this,e),r.subTo(t,r)),e.rShiftTo(1,e)):r.isEven()||r.subTo(t,r),r.rShiftTo(1,r);while(f.isEven())f.rShiftTo(1,f),s?(o.isEven()&&i.isEven()||(o.addTo(this,o),i.subTo(t,i)),o.rShiftTo(1,o)):i.isEven()||i.subTo(t,i),i.rShiftTo(1,i);u.compareTo(f)>=0?(u.subTo(f,u),s&&e.subTo(o,e),r.subTo(i,r)):(f.subTo(u,f),s&&o.subTo(e,o),i.subTo(r,i))}if(f.compareTo(n.ONE)!=0)return n.ZERO;if(i.compareTo(t)>=0)return i.subtract(t);if(i.signum()<0)i.addTo(t,i);else return i;return i.signum()<0?i.add(t):i}function ts(n){var t,i=this.abs(),r,u;if(i.t==1&&i[0]<=o[o.length-1]){for(t=0;t<o.length;++t)if(i[0]==o[t])return!0;return!1}if(i.isEven())return!1;for(t=1;t<o.length;){for(r=o[t],u=t+1;u<o.length&&r<fr;)r*=o[u++];for(r=i.modInt(r);t<u;)if(r%o[t++]==0)return!1}return i.millerRabin(n)}function is(t){var u=this.subtract(n.ONE),f=u.getLowestSetBit(),h,e,s,i,c;if(f<=0)return!1;for(h=u.shiftRight(f),t=t+1>>1,t>o.length&&(t=o.length),e=r(),s=0;s<t;++s)if(e.fromInt(o[Math.floor(Math.random()*o.length)]),i=e.modPow(h,this),i.compareTo(n.ONE)!=0&&i.compareTo(u)!=0){for(c=1;c++<f&&i.compareTo(u)!=0;)if(i=i.modPowInt(2,this),i.compareTo(n.ONE)==0)return!1;if(i.compareTo(u)!=0)return!1}return!0}function e(t,i){return new n(t,i)}function rs(t,i){var r,e,u,o,f;if(i<t.length+11)return alert("Message too long for RSA"),null;for(r=[],e=t.length-1;e>=0&&i>0;)u=t.charCodeAt(e--),u<128?r[--i]=u:u>127&&u<2048?(r[--i]=u&63|128,r[--i]=u>>6|192):(r[--i]=u&63|128,r[--i]=u>>6&63|128,r[--i]=u>>12|224);for(r[--i]=0,o=new SecureRandom,f=[];i>2;){for(f[0]=0;f[0]==0;)o.nextBytes(f);r[--i]=f[0]}return r[--i]=2,r[--i]=0,new n(r)}function ai(n,t,i){for(var u="",r=0;u.length<t;)u+=i(String.fromCharCode.apply(String,n.concat([(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255]))),r+=1;return u}function us(t,i,r){var s,u,e,f,c,o,l,h;if(t.length+2*v+2>i)throw"Message too long for RSA";for(s="",u=0;u<i-t.length-2*v-2;u+=1)s+="\x00";for(e=rstr_sha1("")+s+"\x01"+t,f=new Array(v),(new SecureRandom).nextBytes(f),c=ai(f,e.length,r||rstr_sha1),o=[],u=0;u<e.length;u+=1)o[u]=e.charCodeAt(u)^c.charCodeAt(u);for(l=ai(o,f.length,rstr_sha1),h=[0],u=0;u<f.length;u+=1)h[u+1]=f[u]^l.charCodeAt(u);return new n(h.concat(o))}function i(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function fs(n,t){this.isPublic=!0;typeof n!="string"?(this.n=n,this.e=t):n!=null&&t!=null&&n.length>0&&t.length>0?(this.n=e(n,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function es(n){return n.modPowInt(this.e,this.n)}function os(n){var r=rs(n,this.n.bitLength()+7>>3),i,t;return r==null?null:(i=this.doPublic(r),i==null)?null:(t=i.toString(16),(t.length&1)==0?t:"0"+t)}function ss(n,t){var u=us(n,this.n.bitLength()+7>>3,t),r,i;return u==null?null:(r=this.doPublic(u),r==null)?null:(i=r.toString(16),(i.length&1)==0?i:"0"+i)}function hs(n,t){for(var r=n.toByteArray(),i=0,f,u;i<r.length&&r[i]==0;)++i;if(r.length-i!=t-1||r[i]!=2)return null;for(++i;r[i]!=0;)if(++i>=r.length)return null;for(f="";++i<r.length;)u=r[i]&255,u<128?f+=String.fromCharCode(u):u>191&&u<224?(f+=String.fromCharCode((u&31)<<6|r[i+1]&63),++i):(f+=String.fromCharCode((u&15)<<12|(r[i+1]&63)<<6|r[i+2]&63),i+=2);return f}function vi(n,t,i){for(var u="",r=0;u.length<t;)u+=i(n+String.fromCharCode.apply(String,[(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])),r+=1;return u}function cs(n,t,i){var r,o,u,f,s;for(n=n.toByteArray(),r=0;r<n.length;r+=1)n[r]&=255;while(n.length<t)n.unshift(0);if(n=String.fromCharCode.apply(String,n),n.length<2*v+2)throw"Cipher too short";for(var h=n.substr(1,v),e=n.substr(v+1),l=vi(e,v,i||rstr_sha1),c=[],r=0;r<h.length;r+=1)c[r]=h.charCodeAt(r)^l.charCodeAt(r);for(o=vi(String.fromCharCode.apply(String,c),n.length-v,rstr_sha1),u=[],r=0;r<e.length;r+=1)u[r]=e.charCodeAt(r)^o.charCodeAt(r);if(u=String.fromCharCode.apply(String,u),u.substr(0,v)!==rstr_sha1(""))throw"Hash mismatch";if(u=u.substr(v),f=u.indexOf("\x01"),s=f!=-1?u.substr(0,f).lastIndexOf("\x00"):-1,s+1!=f)throw"Malformed data";return u.substr(f+1)}function ls(n,t,i){this.isPrivate=!0;typeof n!="string"?(this.n=n,this.e=t,this.d=i):n!=null&&t!=null&&n.length>0&&t.length>0?(this.n=e(n,16),this.e=parseInt(t,16),this.d=e(i,16)):alert("Invalid RSA private key")}function as(n,t,i,r,u,f,o,s){if(this.isPrivate=!0,n==null)throw"RSASetPrivateEx N == null";if(t==null)throw"RSASetPrivateEx E == null";if(n.length==0)throw"RSASetPrivateEx N.length == 0";if(t.length==0)throw"RSASetPrivateEx E.length == 0";n!=null&&t!=null&&n.length>0&&t.length>0?(this.n=e(n,16),this.e=parseInt(t,16),this.d=e(i,16),this.p=e(r,16),this.q=e(u,16),this.dmp1=e(f,16),this.dmq1=e(o,16),this.coeff=e(s,16)):alert("Invalid RSA private key in RSASetPrivateEx")}function vs(t,i){var u=new SecureRandom,f=t>>1,r,e;for(this.e=parseInt(i,16),r=new n(i,16);;){for(;;)if(this.p=new n(t-f,1,u),this.p.subtract(n.ONE).gcd(r).compareTo(n.ONE)==0&&this.p.isProbablePrime(10))break;for(;;)if(this.q=new n(f,1,u),this.q.subtract(n.ONE).gcd(r).compareTo(n.ONE)==0&&this.q.isProbablePrime(10))break;this.p.compareTo(this.q)<=0&&(e=this.p,this.p=this.q,this.q=e);var o=this.p.subtract(n.ONE),s=this.q.subtract(n.ONE),h=o.multiply(s);if(h.gcd(r).compareTo(n.ONE)==0){this.n=this.p.multiply(this.q);this.d=r.modInverse(h);this.dmp1=this.d.mod(o);this.dmq1=this.d.mod(s);this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0}function ys(n){if(this.p==null||this.q==null)return n.modPow(this.d,this.n);for(var t=n.mod(this.p).modPow(this.dmp1,this.p),i=n.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(i)<0;)t=t.add(this.p);return t.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)}function ps(n){var i=e(n,16),t=this.doPrivate(i);return t==null?null:hs(t,this.n.bitLength()+7>>3)}function ws(n,t){var r=e(n,16),i=this.doPrivate(r);return i==null?null:cs(i,this.n.bitLength()+7>>3,t)}function bs(n){var t=n;return t=t.replace("-----BEGIN RSA PRIVATE KEY-----",""),t=t.replace("-----END RSA PRIVATE KEY-----",""),t.replace(/[ \n]+/g,"")}function ks(n){var i=[],r=t.getStartPosOfV_AtObj(n,0),u=t.getPosOfNextSibling_AtObj(n,r),f=t.getPosOfNextSibling_AtObj(n,u),e=t.getPosOfNextSibling_AtObj(n,f),o=t.getPosOfNextSibling_AtObj(n,e),s=t.getPosOfNextSibling_AtObj(n,o),h=t.getPosOfNextSibling_AtObj(n,s),c=t.getPosOfNextSibling_AtObj(n,h),l=t.getPosOfNextSibling_AtObj(n,c);return i.push(r,u,f,e,o,s,h,c,l),i}function yi(n){var i=ks(n),u=t.getHexOfV_AtObj(n,i[0]),f=t.getHexOfV_AtObj(n,i[1]),e=t.getHexOfV_AtObj(n,i[2]),o=t.getHexOfV_AtObj(n,i[3]),s=t.getHexOfV_AtObj(n,i[4]),h=t.getHexOfV_AtObj(n,i[5]),c=t.getHexOfV_AtObj(n,i[6]),l=t.getHexOfV_AtObj(n,i[7]),a=t.getHexOfV_AtObj(n,i[8]),r=[];return r.push(u,f,e,o,s,h,c,l,a),r}function ds(n){var t=yi(n);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function gs(n){var i=bs(n),r=tt(i),t=yi(r);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function pi(n,t){for(var i="",u=t/4-n.length,r=0;r<u;r++)i=i+"0";return i+n}function yt(n,t){var i=function(n){return KJUR.crypto.Util.hashString(n,t)},r=i(n);return this.signWithMessageHash(r,t)}function nh(n,t){var i=KJUR.crypto.Util.getPaddedDigestInfoHex(n,t,this.n.bitLength()),r=e(i,16),u=this.doPrivate(r),f=u.toString(16);return pi(f,this.n.bitLength())}function wi(n){return yt.call(this,n,"sha1")}function bi(n){return yt.call(this,n,"sha256")}function ki(n,t,i){for(var u="",r=0;u.length<t;)u+=nt(i(st(n+String.fromCharCode.apply(String,[(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])))),r+=1;return u}function di(n,t,i){var r=function(n){return KJUR.crypto.Util.hashHex(n,t)},u=r(st(n));return i===undefined&&(i=-1),this.signWithMessageHashPSS(u,t,i)}function th(t,i,r){var a=nt(t),e=a.length,v=this.n.bitLength()-1,s=Math.ceil(v/8),u,y=function(n){return KJUR.crypto.Util.hashHex(n,i)},f,h,c,p;if(r===-1||r===undefined)r=e;else if(r===-2)r=s-e-2;else if(r<-2)throw"invalid salt length";if(s<e+r+2)throw"data too long";for(f="",r>0&&(f=new Array(r),(new SecureRandom).nextBytes(f),f=String.fromCharCode.apply(String,f)),h=nt(y(st("\x00\x00\x00\x00\x00\x00\x00\x00"+a+f))),c=[],u=0;u<s-r-e-2;u+=1)c[u]=0;var l=String.fromCharCode.apply(String,c)+"\x01"+f,w=ki(h,l.length,y),o=[];for(u=0;u<l.length;u+=1)o[u]=l.charCodeAt(u)^w.charCodeAt(u);for(p=65280>>8*s-v&255,o[0]&=~p,u=0;u<e;u++)o.push(h.charCodeAt(u));return o.push(188),pi(this.doPrivate(new n(o)).toString(16),this.n.bitLength())}function ih(n,t,r){var u=new i;return u.setPublic(t,r),u.doPublic(n)}function rh(n,t,i){var r=ih(n,t,i);return r.toString(16).replace(/^1f+00/,"")}function ni(n){var t,i,r;for(t in KJUR.crypto.Util.DIGESTINFOHEAD)if(i=KJUR.crypto.Util.DIGESTINFOHEAD[t],r=i.length,n.substring(0,r)==i)return[t,n.substring(r)];return[]}function gi(n,t,i,r){var f=rh(t,i,r),u=ni(f);if(u.length==0)return!1;var e=u[0],o=u[1],s=function(n){return KJUR.crypto.Util.hashString(n,e)},h=s(n);return o==h}function nr(n,t){var i=e(n,16);return gi(t,i,this.n.toString(16),this.e.toString(16))}function tr(n,t){var i;if(t=t.replace(kt,""),t=t.replace(/[ \n]+/g,""),i=e(t,16),i.bitLength()>this.n.bitLength())return 0;var u=this.doPublic(i),f=u.toString(16).replace(/^1f+00/,""),r=ni(f);if(r.length==0)return!1;var o=r[0],s=r[1],h=function(n){return KJUR.crypto.Util.hashString(n,o)},c=h(n);return s==c}function uh(n,t){var i,f,u;if(t=t.replace(kt,""),t=t.replace(/[ \n]+/g,""),i=e(t,16),i.bitLength()>this.n.bitLength())return 0;var o=this.doPublic(i),s=o.toString(16).replace(/^1f+00/,""),r=ni(s);return r.length==0?!1:(f=r[0],u=r[1],u==n)}function ir(n,t,i,r){var u=function(n){return KJUR.crypto.Util.hashHex(n,i)},f=u(st(n));return r===undefined&&(r=-1),this.verifyWithMessageHashPSS(f,t,i,r)}function fh(t,i,r,u){var a=new n(i,16),e,v,s,l;if(a.bitLength()>this.n.bitLength())return!1;var y=function(n){return KJUR.crypto.Util.hashHex(n,r)},p=nt(t),h=p.length,w=this.n.bitLength()-1,o=Math.ceil(w/8),f;if(u===-1||u===undefined)u=h;else if(u===-2)u=o-h-2;else if(u<-2)throw"invalid salt length";if(o<h+u+2)throw"data too long";for(e=this.doPublic(a).toByteArray(),f=0;f<e.length;f+=1)e[f]&=255;while(e.length<o)e.unshift(0);if(e[o-1]!==188)throw"encoded message does not end in 0xbc";e=String.fromCharCode.apply(String,e);var c=e.substr(0,o-h-1),b=e.substr(c.length,h),k=65280>>8*o-w&255;if((c.charCodeAt(0)&k)!=0)throw"bits beyond keysize not zero";for(v=ki(b,c.length,y),s=[],f=0;f<c.length;f+=1)s[f]=c.charCodeAt(f)^v.charCodeAt(f);for(s[0]&=~k,l=o-h-u-2,f=0;f<l;f+=1)if(s[f]!==0)throw"leftmost octets not zero";if(s[l]!==1)throw"0x01 marker not found";return b===nt(y(st("\x00\x00\x00\x00\x00\x00\x00\x00"+p+String.fromCharCode.apply(String,s.slice(-u)))))}function u(){this.subjectPublicKeyRSA=null;this.subjectPublicKeyRSA_hN=null;this.subjectPublicKeyRSA_hE=null;this.hex=null;this.getSerialNumberHex=function(){return t.getDecendantHexVByNthList(this.hex,0,[0,1])};this.getIssuerHex=function(){return t.getDecendantHexTLVByNthList(this.hex,0,[0,3])};this.getIssuerString=function(){return u.hex2dn(t.getDecendantHexTLVByNthList(this.hex,0,[0,3]))};this.getSubjectHex=function(){return t.getDecendantHexTLVByNthList(this.hex,0,[0,5])};this.getSubjectString=function(){return u.hex2dn(t.getDecendantHexTLVByNthList(this.hex,0,[0,5]))};this.getNotBefore=function(){var n=t.getDecendantHexVByNthList(this.hex,0,[0,4,0]);return n=n.replace(/(..)/g,"%$1"),decodeURIComponent(n)};this.getNotAfter=function(){var n=t.getDecendantHexVByNthList(this.hex,0,[0,4,1]);return n=n.replace(/(..)/g,"%$1"),decodeURIComponent(n)};this.readCertPEM=function(n){var r=u.pemToHex(n),t=u.getPublicKeyHexArrayFromCertHex(r),f=new i;f.setPublic(t[0],t[1]);this.subjectPublicKeyRSA=f;this.subjectPublicKeyRSA_hN=t[0];this.subjectPublicKeyRSA_hE=t[1];this.hex=r};this.readCertPEMWithoutRSAInit=function(n){var i=u.pemToHex(n),t=u.getPublicKeyHexArrayFromCertHex(i);this.subjectPublicKeyRSA.setPublic(t[0],t[1]);this.subjectPublicKeyRSA_hN=t[0];this.subjectPublicKeyRSA_hE=t[1];this.hex=i}}function eh(n){for(var i=[],t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return i}function sh(n){for(var t,i="",r=0;r<n.length;r++)t=n[r].toString(16),t.length==1&&(t="0"+t),i=i+t;return i}function ti(n){return sh(eh(n))}function pt(n){return n=n.replace(/\=/g,""),n=n.replace(/\+/g,"-"),n.replace(/\//g,"_")}function wt(n){return n.length%4==2?n=n+"==":n.length%4==3&&(n=n+"="),n=n.replace(/-/g,"+"),n.replace(/_/g,"/")}function g(n){return pt(et(n))}function ii(n){return tt(wt(n))}function nt(n){for(var i="",t=0;t<n.length-1;t+=2)i+=String.fromCharCode(parseInt(n.substr(t,2),16));return i}function st(n){for(var i="",t=0;t<n.length;t++)i+=("0"+n.charCodeAt(t).toString(16)).slice(-2);return i}function ri(n){return n.replace(/%/g,"")}function ui(n){return n.replace(/(..)/g,"%$1")}function fi(n){for(var r=encodeURIComponent(n),i="",t=0;t<r.length;t++)r[t]=="%"?(i=i+r.substr(t,3),t=t+2):i=i+"%"+ti(r[t]);return i}function c(){}function or(n,t){t=t||{};for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}function sr(){return((Date.now()+Math.random())*Math.random()).toString().replace(".","")}function f(n){return Promise.reject(Error(n))}function lh(n){var t,e;c("parseOidcResult");n=n||location.hash;t=n.lastIndexOf("#");t>=0&&(n=n.substr(t+1));for(var i={},u=/([^&=]+)=([^&]*)/g,r,f=0;r=u.exec(n);)if(i[decodeURIComponent(r[1])]=decodeURIComponent(r[2]),f++>50)return{error:"Response exceeded expected number of parameters"};for(e in i)return i}function oi(n,t){c("getJson",n);var i={};return t&&(i.headers={Authorization:"Bearer "+t}),er.getJSON(n,i)}function s(n){this._settings=n||{};typeof this._settings.load_user_profile=="undefined"&&(this._settings.load_user_profile=!0);this._settings.authority&&this._settings.authority.indexOf(".well-known/openid-configuration")<0&&(this._settings.authority[this._settings.authority.length-1]!="/"&&(this._settings.authority+="/"),this._settings.authority+=".well-known/openid-configuration");this._settings.response_type||(this._settings.response_type="id_token token");this._settings.store||(this._settings.store=window.localStorage);Object.defineProperty(this,"isOidc",{get:function(){if(this._settings.response_type){var n=this._settings.response_type.split(/\s+/g).filter(function(n){return n==="id_token"});return!!n[0]}return!1}});Object.defineProperty(this,"isOAuth",{get:function(){if(this._settings.response_type){var n=this._settings.response_type.split(/\s+/g).filter(function(n){return n==="token"});return!!n[0]}return!1}})}function p(n,t,i,r){if(this.id_token=n,this.id_token_jwt=t,this.access_token=i,i)this.expires_at=parseInt(r);else if(n)this.expires_at=n.exp;else throw Error("Either access_token or id_token required.");Object.defineProperty(this,"expired",{get:function(){var n=parseInt(Date.now()/1e3);return this.expires_at<n}});Object.defineProperty(this,"expires_in",{get:function(){var n=parseInt(Date.now()/1e3);return this.expires_at-n}})}function hr(n){this.url=n}function cr(n){var t,i;n._settings.persist&&(t=n._settings.store.getItem(lt),t&&(i=p.fromJSON(t),i.expired||(n._token=i)))}function lr(n){n._callbacks.tokenRemovedCallbacks.forEach(function(n){n()})}function ah(n){n._callbacks.tokenExpiringCallbacks.forEach(function(n){n()})}function vh(n){n._callbacks.tokenExpiredCallbacks.forEach(function(n){n()})}function ar(n){n._callbacks.tokenObtainedCallbacks.forEach(function(n){n()})}function yh(n){function i(){t=null;ah(n)}function r(){t&&(window.clearTimeout(t),t=null)}function f(n){t=window.setTimeout(i,n*1e3)}function u(){if(r(),!n.expired){var t=n.expires_in;t>60?f(t-60):i()}}var t=null;u();n.addOnTokenObtained(u);n.addOnTokenRemoved(r)}function ph(n){n._settings.silent_redirect_uri&&n._settings.silent_renew&&n.addOnTokenExpiring(function(){n.renewTokenSilentAsync().catch(function(n){console.error(n.message||n)})})}function wh(n){function u(){t=null;n._token&&n.saveToken(null);vh(n)}function i(){t&&(window.clearTimeout(t),t=null)}function f(n){t=window.setTimeout(u,n*1e3)}function r(){i();n.expires_in>0&&f(n.expires_in+1)}var t=null;r();n.addOnTokenObtained(r);n.addOnTokenRemoved(i)}function h(n){this._settings=n||{};this._settings.persist=this._settings.persist||!0;this._settings.store=this._settings.store||window.localStorage;this._callbacks={tokenRemovedCallbacks:[],tokenExpiringCallbacks:[],tokenExpiredCallbacks:[],tokenObtainedCallbacks:[]};Object.defineProperty(this,"id_token",{get:function(){if(this._token)return this._token.id_token}});Object.defineProperty(this,"id_token_jwt",{get:function(){if(this._token)return this._token.id_token_jwt}});Object.defineProperty(this,"access_token",{get:function(){if(this._token&&!this._token.expired)return this._token.access_token}});Object.defineProperty(this,"expired",{get:function(){return this._token?this._token.expired:!0}});Object.defineProperty(this,"expires_in",{get:function(){return this._token?this._token.expires_in:0}});Object.defineProperty(this,"expires_at",{get:function(){return this._token?this._token.expires_at:0}});var t=this;cr(t);window.addEventListener("storage",function(n){n.key===lt&&(cr(t),t._token?ar(t):lr(t))});wh(t);ph(t);window.setTimeout(function(){yh(t)},0)}var ch,er,CryptoJS=CryptoJS||function(n,t){var u={},f=u.lib={},i=f.Base=function(){function n(){}return{extend:function(t){n.prototype=this;var i=new n;return t&&i.mixIn(t),i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),r=f.WordArray=i.extend({init:function(n,i){n=this.words=n||[];this.sigBytes=i!=t?i:n.length*4},toString:function(n){return(n||h).stringify(this)},concat:function(n){var i=this.words,r=n.words,u=this.sigBytes,f=n.sigBytes,e,t;if(this.clamp(),u%4)for(t=0;t<f;t++)e=r[t>>>2]>>>24-t%4*8&255,i[u+t>>>2]|=e<<24-(u+t)%4*8;else if(r.length>65535)for(t=0;t<f;t+=4)i[u+t>>>2]=r[t>>>2];else i.push.apply(i,r);return this.sigBytes+=f,this},clamp:function(){var i=this.words,t=this.sigBytes;i[t>>>2]&=4294967295<<32-t%4*8;i.length=n.ceil(t/4)},clone:function(){var n=i.clone.call(this);return n.words=this.words.slice(0),n},random:function(t){for(var i=[],u=0;u<t;u+=4)i.push(n.random()*4294967296|0);return new r.init(i,t)}}),e=u.enc={},h=e.Hex={stringify:function(n){for(var i,u=n.words,f=n.sigBytes,r=[],t=0;t<f;t++)i=u[t>>>2]>>>24-t%4*8&255,r.push((i>>>4).toString(16)),r.push((i&15).toString(16));return r.join("")},parse:function(n){for(var i=n.length,u=[],t=0;t<i;t+=2)u[t>>>3]|=parseInt(n.substr(t,2),16)<<24-t%8*4;return new r.init(u,i/2)}},o=e.Latin1={stringify:function(n){for(var i,u=n.words,f=n.sigBytes,r=[],t=0;t<f;t++)i=u[t>>>2]>>>24-t%4*8&255,r.push(String.fromCharCode(i));return r.join("")},parse:function(n){for(var i=n.length,u=[],t=0;t<i;t++)u[t>>>2]|=(n.charCodeAt(t)&255)<<24-t%4*8;return new r.init(u,i)}},c=e.Utf8={stringify:function(n){try{return decodeURIComponent(escape(o.stringify(n)))}catch(t){throw new Error("Malformed UTF-8 data");}},parse:function(n){return o.parse(unescape(encodeURIComponent(n)))}},s=f.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(n){typeof n=="string"&&(n=c.parse(n));this._data.concat(n);this._nDataBytes+=n.sigBytes},_process:function(t){var e=this._data,h=e.words,c=e.sigBytes,o=this.blockSize,a=o*4,u=c/a,i,s,f,l;if(u=t?n.ceil(u):n.max((u|0)-this._minBufferSize,0),i=u*o,s=n.min(i*4,c),i){for(f=0;f<i;f+=o)this._doProcessBlock(h,f);l=h.splice(0,i);e.sigBytes-=s}return new r.init(l,s)},clone:function(){var n=i.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0}),a=f.Hasher=s.extend({cfg:i.extend(),init:function(n){this.cfg=this.cfg.extend(n);this.reset()},reset:function(){s.reset.call(this);this._doReset()},update:function(n){return this._append(n),this._process(),this},finalize:function(n){return n&&this._append(n),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(t,i){return new n.init(i).finalize(t)}},_createHmacHelper:function(n){return function(t,i){return new l.HMAC.init(n,i).finalize(t)}}}),l=u.algo={};return u}(Math),at,dt,lt;(function(){var t=CryptoJS,r=t.lib,f=r.WordArray,i=r.Hasher,e=t.algo,n=[],u=e.SHA1=i.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,i){for(var h,c,r=this._hash.words,s=r[0],f=r[1],e=r[2],o=r[3],l=r[4],u=0;u<80;u++)u<16?n[u]=t[i+u]|0:(h=n[u-3]^n[u-8]^n[u-14]^n[u-16],n[u]=h<<1|h>>>31),c=(s<<5|s>>>27)+l+n[u],c+=u<20?(f&e|~f&o)+1518500249:u<40?(f^e^o)+1859775393:u<60?(f&e|f&o|e&o)-1894007588:(f^e^o)-899497514,l=o,o=e,e=f<<30|f>>>2,f=s,s=c;r[0]=r[0]+s|0;r[1]=r[1]+f|0;r[2]=r[2]+e|0;r[3]=r[3]+o|0;r[4]=r[4]+l|0},_doFinalize:function(){var i=this._data,n=i.words,r=this._nDataBytes*8,t=i.sigBytes*8;return n[t>>>5]|=128<<24-t%32,n[(t+64>>>9<<4)+14]=Math.floor(r/4294967296),n[(t+64>>>9<<4)+15]=r,i.sigBytes=n.length*4,this._process(),this._hash},clone:function(){var n=i.clone.call(this);return n._hash=this._hash.clone(),n}});t.SHA1=i._createHelper(u);t.HmacSHA1=i._createHmacHelper(u)})(),function(n){var i=CryptoJS,f=i.lib,s=f.WordArray,r=f.Hasher,h=i.algo,e=[],o=[],t,u;(function(){function u(t){for(var r=n.sqrt(t),i=2;i<=r;i++)if(!(t%i))return!1;return!0}function r(n){return(n-(n|0))*4294967296|0}for(var i=2,t=0;t<64;)u(i)&&(t<8&&(e[t]=r(n.pow(i,1/2))),o[t]=r(n.pow(i,1/3)),t++),i++})();t=[];u=h.SHA256=r.extend({_doReset:function(){this._hash=new s.init(e.slice(0))},_doProcessBlock:function(n,i){for(var r=this._hash.words,f=r[0],s=r[1],h=r[2],y=r[3],e=r[4],a=r[5],v=r[6],p=r[7],u=0;u<64;u++){if(u<16)t[u]=n[i+u]|0;else{var c=t[u-15],b=(c<<25|c>>>7)^(c<<14|c>>>18)^c>>>3,l=t[u-2],k=(l<<15|l>>>17)^(l<<13|l>>>19)^l>>>10;t[u]=b+t[u-7]+k+t[u-16]}var d=e&a^~e&v,g=f&s^f&h^s&h,nt=(f<<30|f>>>2)^(f<<19|f>>>13)^(f<<10|f>>>22),tt=(e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25),w=p+tt+d+o[u]+t[u],it=nt+g;p=v;v=a;a=e;e=y+w|0;y=h;h=s;s=f;f=w+it|0}r[0]=r[0]+f|0;r[1]=r[1]+s|0;r[2]=r[2]+h|0;r[3]=r[3]+y|0;r[4]=r[4]+e|0;r[5]=r[5]+a|0;r[6]=r[6]+v|0;r[7]=r[7]+p|0},_doFinalize:function(){var r=this._data,t=r.words,u=this._nDataBytes*8,i=r.sigBytes*8;return t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=n.floor(u/4294967296),t[(i+64>>>9<<4)+15]=u,r.sigBytes=t.length*4,this._process(),this._hash},clone:function(){var n=r.clone.call(this);return n._hash=this._hash.clone(),n}});i.SHA256=r._createHelper(u);i.HmacSHA256=r._createHmacHelper(u)}(Math),function(n){var i=CryptoJS,r=i.lib,t=r.Base,f=r.WordArray,u=i.x64={},e=u.Word=t.extend({init:function(n,t){this.high=n;this.low=t}}),o=u.WordArray=t.extend({init:function(t,i){t=this.words=t||[];this.sigBytes=i!=n?i:t.length*8},toX32:function(){for(var n,r=this.words,u=r.length,t=[],i=0;i<u;i++)n=r[i],t.push(n.high),t.push(n.low);return f.create(t,this.sigBytes)},clone:function(){for(var r=t.clone.call(this),i=r.words=this.words.slice(0),u=i.length,n=0;n<u;n++)i[n]=i[n].clone();return r}})}(),function(){function n(){return t.create.apply(t,arguments)}var r=CryptoJS,o=r.lib,u=o.Hasher,e=r.x64,t=e.Word,s=e.WordArray,h=r.algo,c=[n(1116352408,3609767458),n(1899447441,602891725),n(3049323471,3964484399),n(3921009573,2173295548),n(961987163,4081628472),n(1508970993,3053834265),n(2453635748,2937671579),n(2870763221,3664609560),n(3624381080,2734883394),n(310598401,1164996542),n(607225278,1323610764),n(1426881987,3590304994),n(1925078388,4068182383),n(2162078206,991336113),n(2614888103,633803317),n(3248222580,3479774868),n(3835390401,2666613458),n(4022224774,944711139),n(264347078,2341262773),n(604807628,2007800933),n(770255983,1495990901),n(1249150122,1856431235),n(1555081692,3175218132),n(1996064986,2198950837),n(2554220882,3999719339),n(2821834349,766784016),n(2952996808,2566594879),n(3210313671,3203337956),n(3336571891,1034457026),n(3584528711,2466948901),n(113926993,3758326383),n(338241895,168717936),n(666307205,1188179964),n(773529912,1546045734),n(1294757372,1522805485),n(1396182291,2643833823),n(1695183700,2343527390),n(1986661051,1014477480),n(2177026350,1206759142),n(2456956037,344077627),n(2730485921,1290863460),n(2820302411,3158454273),n(3259730800,3505952657),n(3345764771,106217008),n(3516065817,3606008344),n(3600352804,1432725776),n(4094571909,1467031594),n(275423344,851169720),n(430227734,3100823752),n(506948616,1363258195),n(659060556,3750685593),n(883997877,3785050280),n(958139571,3318307427),n(1322822218,3812723403),n(1537002063,2003034995),n(1747873779,3602036899),n(1955562222,1575990012),n(2024104815,1125592928),n(2227730452,2716904306),n(2361852424,442776044),n(2428436474,593698344),n(2756734187,3733110249),n(3204031479,2999351573),n(3329325298,3815920427),n(3391569614,3928383900),n(3515267271,566280711),n(3940187606,3454069534),n(4118630271,4000239992),n(116418474,1914138554),n(174292421,2731055270),n(289380356,3203993006),n(460393269,320620315),n(685471733,587496836),n(852142971,1086792851),n(1017036298,365543100),n(1126000580,2618297676),n(1288033470,3409855158),n(1501505948,4234509866),n(1607167915,987167468),n(1816402316,1246189591)],i=[],f;(function(){for(var t=0;t<80;t++)i[t]=n()})();f=h.SHA512=u.extend({_doReset:function(){this._hash=new s.init([new t.init(1779033703,4089235720),new t.init(3144134277,2227873595),new t.init(1013904242,4271175723),new t.init(2773480762,1595750129),new t.init(1359893119,2917565137),new t.init(2600822924,725511199),new t.init(528734635,4215389547),new t.init(1541459225,327033209)])},_doProcessBlock:function(n,t){for(var w,b,h,l=this._hash.words,et=l[0],ot=l[1],st=l[2],ht=l[3],ct=l[4],lt=l[5],at=l[6],vt=l[7],fi=et.high,yt=et.low,ei=ot.high,pt=ot.low,oi=st.high,wt=st.low,si=ht.high,bt=ht.low,hi=ct.high,kt=ct.low,ci=lt.high,dt=lt.low,li=at.high,gt=at.low,ai=vt.high,ni=vt.low,f=fi,r=yt,k=ei,a=pt,d=oi,v=wt,ri=si,g=bt,e=hi,u=kt,ti=ci,nt=dt,ii=li,tt=gt,ui=ai,it=ni,o=0;o<80;o++){if(w=i[o],o<16)b=w.high=n[t+o*2]|0,h=w.low=n[t+o*2+1]|0;else{var vi=i[o-15],y=vi.high,rt=vi.low,ur=(y>>>1|rt<<31)^(y>>>8|rt<<24)^y>>>7,yi=(rt>>>1|y<<31)^(rt>>>8|y<<24)^(rt>>>7|y<<25),pi=i[o-2],p=pi.high,ut=pi.low,fr=(p>>>19|ut<<13)^(p<<3|ut>>>29)^p>>>6,wi=(ut>>>19|p<<13)^(ut<<3|p>>>29)^(ut>>>6|p<<26),bi=i[o-7],er=bi.high,or=bi.low,ki=i[o-16],sr=ki.high,di=ki.low,h=yi+or,b=ur+er+(h>>>0<yi>>>0?1:0),h=h+wi,b=b+fr+(h>>>0<wi>>>0?1:0),h=h+di,b=b+sr+(h>>>0<di>>>0?1:0);w.high=b;w.low=h}var hr=e&ti^~e&ii,gi=u&nt^~u&tt,cr=f&k^f&d^k&d,lr=r&a^r&v^a&v,ar=(f>>>28|r<<4)^(f<<30|r>>>2)^(f<<25|r>>>7),nr=(r>>>28|f<<4)^(r<<30|f>>>2)^(r<<25|f>>>7),vr=(e>>>14|u<<18)^(e>>>18|u<<14)^(e<<23|u>>>9),yr=(u>>>14|e<<18)^(u>>>18|e<<14)^(u<<23|e>>>9),tr=c[o],pr=tr.high,ir=tr.low,s=it+yr,ft=ui+vr+(s>>>0<it>>>0?1:0),s=s+gi,ft=ft+hr+(s>>>0<gi>>>0?1:0),s=s+ir,ft=ft+pr+(s>>>0<ir>>>0?1:0),s=s+h,ft=ft+b+(s>>>0<h>>>0?1:0),rr=nr+lr,wr=ar+cr+(rr>>>0<nr>>>0?1:0);ui=ii;it=tt;ii=ti;tt=nt;ti=e;nt=u;u=g+s|0;e=ri+ft+(u>>>0<g>>>0?1:0)|0;ri=d;g=v;d=k;v=a;k=f;a=r;r=s+rr|0;f=ft+wr+(r>>>0<s>>>0?1:0)|0}yt=et.low=yt+r;et.high=fi+f+(yt>>>0<r>>>0?1:0);pt=ot.low=pt+a;ot.high=ei+k+(pt>>>0<a>>>0?1:0);wt=st.low=wt+v;st.high=oi+d+(wt>>>0<v>>>0?1:0);bt=ht.low=bt+g;ht.high=si+ri+(bt>>>0<g>>>0?1:0);kt=ct.low=kt+u;ct.high=hi+e+(kt>>>0<u>>>0?1:0);dt=lt.low=dt+nt;lt.high=ci+ti+(dt>>>0<nt>>>0?1:0);gt=at.low=gt+tt;at.high=li+ii+(gt>>>0<tt>>>0?1:0);ni=vt.low=ni+it;vt.high=ai+ui+(ni>>>0<it>>>0?1:0)},_doFinalize:function(){var i=this._data,n=i.words,r=this._nDataBytes*8,t=i.sigBytes*8;return n[t>>>5]|=128<<24-t%32,n[(t+128>>>10<<5)+30]=Math.floor(r/4294967296),n[(t+128>>>10<<5)+31]=r,i.sigBytes=n.length*4,this._process(),this._hash.toX32()},clone:function(){var n=u.clone.call(this);return n._hash=this._hash.clone(),n},blockSize:32});r.SHA512=u._createHelper(f);r.HmacSHA512=u._createHmacHelper(f)}();var rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ei="=",b,rr=(0xdeadbeefcafe&16777215)==15715070,bt,ur,ht,ut,l,o,fr,v,kt,t,ft,ct;for(rr&&navigator.appName=="Microsoft Internet Explorer"?(n.prototype.am=pr,b=30):rr&&navigator.appName!="Netscape"?(n.prototype.am=yr,b=26):(n.prototype.am=wr,b=28),n.prototype.DB=b,n.prototype.DM=(1<<b)-1,n.prototype.DV=1<<b,bt=52,n.prototype.FV=Math.pow(2,bt),n.prototype.F1=bt-b,n.prototype.F2=2*b-bt,ur="0123456789abcdefghijklmnopqrstuvwxyz",ht=[],ut="0".charCodeAt(0),l=0;l<=9;++l)ht[ut++]=l;for(ut="a".charCodeAt(0),l=10;l<36;++l)ht[ut++]=l;for(ut="A".charCodeAt(0),l=10;l<36;++l)ht[ut++]=l;k.prototype.convert=yu;k.prototype.revert=pu;k.prototype.reduce=wu;k.prototype.mulTo=bu;k.prototype.sqrTo=ku;d.prototype.convert=gu;d.prototype.revert=nf;d.prototype.reduce=tf;d.prototype.mulTo=uf;d.prototype.sqrTo=rf;n.prototype.copyTo=br;n.prototype.fromInt=kr;n.prototype.fromString=dr;n.prototype.clamp=gr;n.prototype.dlShiftTo=fu;n.prototype.drShiftTo=eu;n.prototype.lShiftTo=ou;n.prototype.rShiftTo=su;n.prototype.subTo=hu;n.prototype.multiplyTo=cu;n.prototype.squareTo=lu;n.prototype.divRemTo=au;n.prototype.invDigit=du;n.prototype.isEven=ff;n.prototype.exp=ef;n.prototype.toString=nu;n.prototype.negate=tu;n.prototype.abs=iu;n.prototype.compareTo=ru;n.prototype.bitLength=uu;n.prototype.mod=vu;n.prototype.modPowInt=of;n.ZERO=w(0);n.ONE=w(1);ot.prototype.convert=li;ot.prototype.revert=li;ot.prototype.mulTo=oo;ot.prototype.sqrTo=so;it.prototype.convert=ao;it.prototype.revert=vo;it.prototype.reduce=yo;it.prototype.mulTo=wo;it.prototype.sqrTo=po;o=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];fr=67108864/o[o.length-1];n.prototype.chunkSize=af;n.prototype.toRadix=yf;n.prototype.fromRadix=pf;n.prototype.fromNumber=wf;n.prototype.bitwiseTo=ne;n.prototype.changeBit=ye;n.prototype.addTo=ke;n.prototype.dMultiply=fo;n.prototype.dAddOffset=eo;n.prototype.multiplyLowerTo=co;n.prototype.multiplyUpperTo=lo;n.prototype.modInt=go;n.prototype.millerRabin=is;n.prototype.clone=sf;n.prototype.intValue=hf;n.prototype.byteValue=cf;n.prototype.shortValue=lf;n.prototype.signum=vf;n.prototype.toByteArray=bf;n.prototype.equals=kf;n.prototype.min=df;n.prototype.max=gf;n.prototype.and=ie;n.prototype.or=re;n.prototype.xor=ue;n.prototype.andNot=fe;n.prototype.not=ee;n.prototype.shiftLeft=oe;n.prototype.shiftRight=se;n.prototype.getLowestSetBit=ce;n.prototype.bitCount=ae;n.prototype.testBit=ve;n.prototype.setBit=pe;n.prototype.clearBit=we;n.prototype.flipBit=be;n.prototype.add=de;n.prototype.subtract=ge;n.prototype.multiply=no;n.prototype.divide=io;n.prototype.remainder=ro;n.prototype.divideAndRemainder=uo;n.prototype.modPow=bo;n.prototype.modInverse=ns;n.prototype.pow=ho;n.prototype.gcd=ko;n.prototype.isProbablePrime=ts;n.prototype.square=to;v=20;i.prototype.doPublic=es;i.prototype.setPublic=fs;i.prototype.encrypt=os;i.prototype.encryptOAEP=ss;i.prototype.type="RSA";v=20;i.prototype.doPrivate=ys;i.prototype.setPrivate=ls;i.prototype.setPrivateEx=as;i.prototype.generate=vs;i.prototype.decrypt=ps;i.prototype.decryptOAEP=ws;i.prototype.readPrivateKeyFromPEMString=gs;i.prototype.readPrivateKeyFromASN1HexString=ds;kt=new RegExp("");kt.compile("[^0-9a-f]","gi");i.prototype.signWithMessageHash=nh;i.prototype.signString=yt;i.prototype.signStringWithSHA1=wi;i.prototype.signStringWithSHA256=bi;i.prototype.sign=yt;i.prototype.signWithSHA1=wi;i.prototype.signWithSHA256=bi;i.prototype.signWithMessageHashPSS=th;i.prototype.signStringPSS=di;i.prototype.signPSS=di;i.SALT_LEN_HLEN=-1;i.SALT_LEN_MAX=-2;i.prototype.verifyWithMessageHash=uh;i.prototype.verifyString=tr;i.prototype.verifyHexSignatureForMessage=nr;i.prototype.verify=tr;i.prototype.verifyHexSignatureForByteArrayMessage=nr;i.prototype.verifyWithMessageHashPSS=fh;i.prototype.verifyStringPSS=ir;i.prototype.verifyPSS=ir;i.SALT_LEN_RECOVER=-2;t=new function(){this.getByteLengthOfL_AtObj=function(n,t){if(n.substring(t+2,t+3)!="8")return 1;var i=parseInt(n.substring(t+3,t+4));return i==0?-1:0<i&&i<10?i+1:-2};this.getHexOfL_AtObj=function(n,t){var i=this.getByteLengthOfL_AtObj(n,t);return i<1?"":n.substring(t+2,t+2+i*2)};this.getIntOfL_AtObj=function(t,i){var r=this.getHexOfL_AtObj(t,i),u;return r==""?-1:(u=parseInt(r.substring(0,1))<8?new n(r,16):new n(r.substring(2),16),u.intValue())};this.getStartPosOfV_AtObj=function(n,t){var i=this.getByteLengthOfL_AtObj(n,t);return i<0?i:t+(i+1)*2};this.getHexOfV_AtObj=function(n,t){var i=this.getStartPosOfV_AtObj(n,t),r=this.getIntOfL_AtObj(n,t);return n.substring(i,i+r*2)};this.getHexOfTLV_AtObj=function(n,t){var i=n.substr(t,2),r=this.getHexOfL_AtObj(n,t),u=this.getHexOfV_AtObj(n,t);return i+r+u};this.getPosOfNextSibling_AtObj=function(n,t){var i=this.getStartPosOfV_AtObj(n,t),r=this.getIntOfL_AtObj(n,t);return i+r*2};this.getPosArrayOfChildren_AtObj=function(n,t){var r=[],u=this.getStartPosOfV_AtObj(n,t),i;r.push(u);for(var o=this.getIntOfL_AtObj(n,t),f=u,e=0;;){if(i=this.getPosOfNextSibling_AtObj(n,f),i==null||i-u>=o*2)break;if(e>=200)break;r.push(i);f=i;e++}return r};this.getNthChildIndex_AtObj=function(n,t,i){var r=this.getPosArrayOfChildren_AtObj(n,t);return r[i]};this.getDecendantIndexByNthList=function(n,t,i){if(i.length==0)return t;var r=i.shift(),u=this.getPosArrayOfChildren_AtObj(n,t);return this.getDecendantIndexByNthList(n,u[r],i)};this.getDecendantHexTLVByNthList=function(n,t,i){var r=this.getDecendantIndexByNthList(n,t,i);return this.getHexOfTLV_AtObj(n,r)};this.getDecendantHexVByNthList=function(n,t,i){var r=this.getDecendantIndexByNthList(n,t,i);return this.getHexOfV_AtObj(n,r)}};t.getVbyList=function(n,t,i,r){var u=this.getDecendantIndexByNthList(n,t,i);if(u===undefined)throw"can't find nthList object";if(r!==undefined&&n.substr(u,2)!=r)throw"checking tag doesn't match: "+n.substr(u,2)+"!="+r;return this.getHexOfV_AtObj(n,u)};t.hextooidstr=function(n){var s=function(n,t){return n.length>=t?n:new Array(t-n.length+1).join("0")+n},e=[],c=n.substr(0,2),h=parseInt(c,16),o,r,u,i,t,f;for(e[0]=new String(Math.floor(h/40)),e[1]=new String(h%40),o=n.substr(2),r=[],t=0;t<o.length/2;t++)r.push(parseInt(o.substr(t*2,2),16));for(u=[],i="",t=0;t<r.length;t++)r[t]&128?i=i+s((r[t]&127).toString(2),7):(i=i+s((r[t]&127).toString(2),7),u.push(new String(parseInt(i,2))),i="");return f=e.join("."),u.length>0&&(f=f+"."+u.join(".")),f};u.pemToBase64=function(n){var t=n;return t=t.replace("-----BEGIN CERTIFICATE-----",""),t=t.replace("-----END CERTIFICATE-----",""),t.replace(/[ \n]+/g,"")};u.pemToHex=function(n){var t=u.pemToBase64(n);return tt(t)};u.getSubjectPublicKeyPosFromCertHex=function(n){var e=u.getSubjectPublicKeyInfoPosFromCertHex(n),f,i,r;return e==-1?-1:(f=t.getPosArrayOfChildren_AtObj(n,e),f.length!=2)?-1:(i=f[1],n.substring(i,i+2)!="03")?-1:(r=t.getStartPosOfV_AtObj(n,i),n.substring(r,r+2)!="00")?-1:r+2};u.getSubjectPublicKeyInfoPosFromCertHex=function(n){var r=t.getStartPosOfV_AtObj(n,0),i=t.getPosArrayOfChildren_AtObj(n,r);return i.length<1?-1:n.substring(i[0],i[0]+10)=="a003020102"?i.length<6?-1:i[6]:i.length<5?-1:i[5]};u.getPublicKeyHexArrayFromCertHex=function(n){var e=u.getSubjectPublicKeyPosFromCertHex(n),i=t.getPosArrayOfChildren_AtObj(n,e),r,f;return i.length!=2?[]:(r=t.getHexOfV_AtObj(n,i[0]),f=t.getHexOfV_AtObj(n,i[1]),r!=null&&f!=null?[r,f]:[])};u.getHexTbsCertificateFromCert=function(n){return t.getStartPosOfV_AtObj(n,0)};u.getPublicKeyHexArrayFromCertPEM=function(n){var t=u.pemToHex(n);return u.getPublicKeyHexArrayFromCertHex(t)};u.hex2dn=function(n){for(var f,i="",e=t.getPosArrayOfChildren_AtObj(n,0),r=0;r<e.length;r++)f=t.getHexOfTLV_AtObj(n,e[r]),i=i+"/"+u.hex2rdn(f);return i};u.hex2rdn=function(n){var f=t.getDecendantHexTLVByNthList(n,0,[0,0]),i=t.getDecendantHexVByNthList(n,0,[0,1]),r="",e;try{r=u.DN_ATTRHEX[f]}catch(o){r=f}return i=i.replace(/(..)/g,"%$1"),e=decodeURIComponent(i),r+"="+e};u.DN_ATTRHEX={"0603550406":"C","060355040a":"O","060355040b":"OU","0603550403":"CN","0603550405":"SN","0603550408":"ST","0603550407":"L"};u.getPublicKeyFromCertPEM=function(r){var f=u.getPublicKeyInfoPropOfCertPEM(r),o,h,e;if(f.algoid=="2a864886f70d010101")return o=KEYUTIL.parsePublicRawRSAKeyHex(f.keyhex),e=new i,e.setPublic(o.n,o.e),e;if(f.algoid=="2a8648ce3d0201")return h=KJUR.crypto.OID.oidhex2name[f.algparam],e=new KJUR.crypto.ECDSA({curve:h,info:f.keyhex}),e.setPublicKeyHex(f.keyhex),e;if(f.algoid=="2a8648ce380401"){var c=t.getVbyList(f.algparam,0,[0],"02"),l=t.getVbyList(f.algparam,0,[1],"02"),a=t.getVbyList(f.algparam,0,[2],"02"),s=t.getHexOfV_AtObj(f.keyhex,0);return s=s.substr(2),e=new KJUR.crypto.DSA,e.setPublic(new n(c,16),new n(l,16),new n(a,16),new n(s,16)),e}throw"unsupported key";};u.getPublicKeyInfoPropOfCertPEM=function(n){var f={},i,o,s,e,r,h;if(f.algparam=null,i=u.pemToHex(n),o=t.getPosArrayOfChildren_AtObj(i,0),o.length!=3)throw"malformed X.509 certificate PEM (code:001)";if(i.substr(o[0],2)!="30")throw"malformed X.509 certificate PEM (code:002)";if(s=t.getPosArrayOfChildren_AtObj(i,o[0]),s.length<7)throw"malformed X.509 certificate PEM (code:003)";if(e=t.getPosArrayOfChildren_AtObj(i,s[6]),e.length!=2)throw"malformed X.509 certificate PEM (code:004)";if(r=t.getPosArrayOfChildren_AtObj(i,e[0]),r.length!=2)throw"malformed X.509 certificate PEM (code:005)";if(f.algoid=t.getHexOfV_AtObj(i,r[0]),i.substr(r[1],2)=="06"?f.algparam=t.getHexOfV_AtObj(i,r[1]):i.substr(r[1],2)=="30"&&(f.algparam=t.getHexOfTLV_AtObj(i,r[1])),i.substr(e[1],2)!="03")throw"malformed X.509 certificate PEM (code:006)";return h=t.getHexOfV_AtObj(i,e[1]),f.keyhex=h.substr(2),f};typeof KJUR!="undefined"&&KJUR||(KJUR={});typeof KJUR.crypto!="undefined"&&KJUR.crypto||(KJUR.crypto={});KJUR.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"};this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"};this.CRYPTOJSMESSAGEDIGESTNAME={md5:"CryptoJS.algo.MD5",sha1:"CryptoJS.algo.SHA1",sha224:"CryptoJS.algo.SHA224",sha256:"CryptoJS.algo.SHA256",sha384:"CryptoJS.algo.SHA384",sha512:"CryptoJS.algo.SHA512",ripemd160:"CryptoJS.algo.RIPEMD160"};this.getDigestInfoHex=function(n,t){if(typeof this.DIGESTINFOHEAD[t]=="undefined")throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+n};this.getPaddedDigestInfoHex=function(n,t,i){var u=this.getDigestInfoHex(n,t),f=i/4,r;if(u.length+22>f)throw"key is too short for SigAlg: keylen="+i+","+t;var e="0001",o="00"+u,s="",h=f-e.length-o.length;for(r=0;r<h;r+=2)s+="ff";return e+s+o};this.hashString=function(n,t){var i=new KJUR.crypto.MessageDigest({alg:t});return i.digestString(n)};this.hashHex=function(n,t){var i=new KJUR.crypto.MessageDigest({alg:t});return i.digestHex(n)};this.sha1=function(n){var t=new KJUR.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"});return t.digestString(n)};this.sha256=function(n){var t=new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"});return t.digestString(n)};this.sha256Hex=function(n){var t=new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"});return t.digestHex(n)};this.sha512=function(n){var t=new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"});return t.digestString(n)};this.sha512Hex=function(n){var t=new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"});return t.digestHex(n)};this.md5=function(n){var t=new KJUR.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return t.digestString(n)};this.ripemd160=function(n){var t=new KJUR.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return t.digestString(n)};this.getCryptoJSMDByName=function(){}};KJUR.crypto.MessageDigest=function(n){this.setAlgAndProvider=function(alg,prov){if(alg!=null&&prov===undefined&&(prov=KJUR.crypto.Util.DEFAULTPROVIDER[alg]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(alg)!=-1&&prov=="cryptojs"){try{this.md=eval(KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[alg]).create()}catch(ex){throw"setAlgAndProvider hash alg set fail alg="+alg+"/"+ex;}this.updateString=function(n){this.md.update(n)};this.updateHex=function(n){var t=CryptoJS.enc.Hex.parse(n);this.md.update(t)};this.digest=function(){var n=this.md.finalize();return n.toString(CryptoJS.enc.Hex)};this.digestString=function(n){return this.updateString(n),this.digest()};this.digestHex=function(n){return this.updateHex(n),this.digest()}}if(":sha256:".indexOf(alg)!=-1&&prov=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(ex){throw"setAlgAndProvider hash alg set fail alg="+alg+"/"+ex;}this.updateString=function(n){this.md.update(n)};this.updateHex=function(n){var t=sjcl.codec.hex.toBits(n);this.md.update(t)};this.digest=function(){var n=this.md.finalize();return sjcl.codec.hex.fromBits(n)};this.digestString=function(n){return this.updateString(n),this.digest()};this.digestHex=function(n){return this.updateHex(n),this.digest()}}};this.updateString=function(){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName;};this.updateHex=function(){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName;};this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName;};this.digestString=function(){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName;};this.digestHex=function(){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName;};n!==undefined&&n.alg!==undefined&&(this.algName=n.alg,n.prov===undefined&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};KJUR.crypto.Mac=function(n){this.setAlgAndProvider=function(alg,prov){var hashAlg,mdObj;if(alg==null&&(alg="hmacsha1"),alg=alg.toLowerCase(),alg.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+alg;if(prov===undefined&&(prov=KJUR.crypto.Util.DEFAULTPROVIDER[alg]),this.algProv=alg+"/"+prov,hashAlg=alg.substr(4),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(hashAlg)!=-1&&prov=="cryptojs"){try{mdObj=eval(KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[hashAlg]);this.mac=CryptoJS.algo.HMAC.create(mdObj,this.pass)}catch(ex){throw"setAlgAndProvider hash alg set fail hashAlg="+hashAlg+"/"+ex;}this.updateString=function(n){this.mac.update(n)};this.updateHex=function(n){var t=CryptoJS.enc.Hex.parse(n);this.mac.update(t)};this.doFinal=function(){var n=this.mac.finalize();return n.toString(CryptoJS.enc.Hex)};this.doFinalString=function(n){return this.updateString(n),this.doFinal()};this.doFinalHex=function(n){return this.updateHex(n),this.doFinal()}}};this.updateString=function(){throw"updateString(str) not supported for this alg/prov: "+this.algProv;};this.updateHex=function(){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv;};this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv;};this.doFinalString=function(){throw"digestString(str) not supported for this alg/prov: "+this.algProv;};this.doFinalHex=function(){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv;};n!==undefined&&(n.pass!==undefined&&(this.pass=n.pass),n.alg!==undefined&&(this.algName=n.alg,n.prov===undefined&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};KJUR.crypto.Signature=function(n){var t=null;if(this._setAlgNames=function(){this.algName.match(/^(.+)with(.+)$/)&&(this.mdAlgName=RegExp.$1.toLowerCase(),this.pubkeyAlgName=RegExp.$2.toLowerCase())},this._zeroPaddingOfSignature=function(n,t){for(var i="",u=t/4-n.length,r=0;r<u;r++)i=i+"0";return i+n},this.setAlgAndProvider=function(n,t){if(this._setAlgNames(),t!="cryptojs/jsrsa")throw"provider not supported: "+t;if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new KJUR.crypto.MessageDigest({alg:this.mdAlgName})}catch(r){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+r;}this.init=function(n,t){var i=null;try{i=t===undefined?KEYUTIL.getKey(n):KEYUTIL.getKey(n,t)}catch(r){throw"init failed:"+r;}if(i.isPrivate===!0)this.prvKey=i,this.state="SIGN";else if(i.isPublic===!0)this.pubKey=i,this.state="VERIFY";else throw"init failed.:"+i;};this.initSign=function(n){typeof n.ecprvhex=="string"&&typeof n.eccurvename=="string"?(this.ecprvhex=n.ecprvhex,this.eccurvename=n.eccurvename):this.prvKey=n;this.state="SIGN"};this.initVerifyByPublicKey=function(n){typeof n.ecpubhex=="string"&&typeof n.eccurvename=="string"?(this.ecpubhex=n.ecpubhex,this.eccurvename=n.eccurvename):n instanceof KJUR.crypto.ECDSA?this.pubKey=n:n instanceof i&&(this.pubKey=n);this.state="VERIFY"};this.initVerifyByCertificatePEM=function(n){var t=new u;t.readCertPEM(n);this.pubKey=t.subjectPublicKeyRSA;this.state="VERIFY"};this.updateString=function(n){this.md.updateString(n)};this.updateHex=function(n){this.md.updateHex(n)};this.sign=function(){if(this.sHashHex=this.md.digest(),typeof this.ecprvhex!="undefined"&&typeof this.eccurvename!="undefined"){var n=new KJUR.crypto.ECDSA({curve:this.eccurvename});this.hSign=n.signHex(this.sHashHex,this.ecprvhex)}else if(this.pubkeyAlgName=="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.pubkeyAlgName=="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof KJUR.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof KJUR.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported public key alg: "+this.pubkeyAlgName;return this.hSign};this.signString=function(n){return this.updateString(n),this.sign()};this.signHex=function(n){return this.updateHex(n),this.sign()};this.verify=function(n){if(this.sHashHex=this.md.digest(),typeof this.ecpubhex!="undefined"&&typeof this.eccurvename!="undefined"){var t=new KJUR.crypto.ECDSA({curve:this.eccurvename});return t.verifyHex(this.sHashHex,n,this.ecpubhex)}if(this.pubkeyAlgName=="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,n,this.mdAlgName,this.pssSaltLen);if(this.pubkeyAlgName=="rsa"||this.pubKey instanceof KJUR.crypto.ECDSA||this.pubKey instanceof KJUR.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,n);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName;}}},this.init=function(){throw"init(key, pass) not supported for this alg:prov="+this.algProvName;},this.initVerifyByPublicKey=function(){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.algProvName;},this.initVerifyByCertificatePEM=function(){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.algProvName;},this.initSign=function(){throw"initSign(prvKey) not supported for this alg:prov="+this.algProvName;},this.updateString=function(){throw"updateString(str) not supported for this alg:prov="+this.algProvName;},this.updateHex=function(){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName;},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName;},this.signString=function(){throw"digestString(str) not supported for this alg:prov="+this.algProvName;},this.signHex=function(){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName;},this.verify=function(){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName;},this.initParams=n,n!==undefined&&(n.alg!==undefined&&(this.algName=n.alg,this.provName=n.prov===undefined?KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]:n.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),n.psssaltlen!==undefined&&(this.pssSaltLen=n.psssaltlen),n.prvkeypem!==undefined))if(n.prvkeypas!==undefined)throw"both prvkeypem and prvkeypas parameters not supported";else try{t=new i;t.readPrivateKeyFromPEMString(n.prvkeypem);this.initSign(t)}catch(r){throw"fatal error to load pem private key: "+r;}};KJUR.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};typeof Buffer=="function"?(ft=function(n){return pt(new Buffer(n,"utf8").toString("base64"))},ct=function(n){return new Buffer(wt(n),"base64").toString("utf8")}):(ft=function(n){return g(ri(fi(n)))},ct=function(n){return decodeURIComponent(ui(ii(n)))});at=function(){function n(n,t,i){return t?r[t]:String.fromCharCode(parseInt(i,16))}var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),i=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u=new String(""),f="\\",o={"{":Object,"[":Array},e=Object.hasOwnProperty;return function(r,o){var y=r.match(t),a,l=y[0],p=!1,h,c,v,b,s,w;for("{"===l?a={}:"["===l?a=[]:(a=[],p=!0),c=[a],v=1-p,b=y.length;v<b;++v){l=y[v];switch(l.charCodeAt(0)){default:s=c[0];s[h||s.length]=+l;h=void 0;break;case 34:if(l=l.substring(1,l.length-1),l.indexOf(f)!==-1&&(l=l.replace(i,n)),s=c[0],!h)if(s instanceof Array)h=s.length;else{h=l||u;break}s[h]=l;h=void 0;break;case 91:s=c[0];c.unshift(s[h||s.length]=[]);h=void 0;break;case 93:c.shift();break;case 102:s=c[0];s[h||s.length]=!1;h=void 0;break;case 110:s=c[0];s[h||s.length]=null;h=void 0;break;case 116:s=c[0];s[h||s.length]=!0;h=void 0;break;case 123:s=c[0];c.unshift(s[h||s.length]={});h=void 0;break;case 125:c.shift()}}if(p){if(c.length!==1)throw new Error;a=a[0]}else if(c.length)throw new Error;return o&&(w=function(n,t){var i=n[t],r,u,f,s;if(i&&typeof i=="object"){r=null;for(u in i)e.call(i,u)&&i!==n&&(f=w(i,u),f!==void 0?i[u]=f:(r||(r=[]),r.push(u)));if(r)for(s=r.length;--s>=0;)delete i[r[s]]}return o.call(n,t,i)},a=w({"":a},"")),a}}();typeof KJUR!="undefined"&&KJUR||(KJUR={});typeof KJUR.jws!="undefined"&&KJUR.jws||(KJUR.jws={});KJUR.jws.JWS=function(){function n(n,t){return ft(n)+"."+ft(t)}function t(n){var t=n.alg,i="";if(t!="RS256"&&t!="RS512"&&t!="PS256"&&t!="PS512")throw"JWS signature algorithm not supported: "+t;return t.substr(2)=="256"&&(i="sha256"),t.substr(2)=="512"&&(i="sha512"),i}function r(n){return t(at(n))}function f(n,t,u,f,e,o){var s=new i,h,c;return s.setPrivate(f,e,o),h=r(n),c=s.signString(u,h),c}function o(n,i,u,f,e){var o=null,s;return o=typeof e=="undefined"?r(n):t(e),s=e.alg.substr(0,2)=="PS",f.hashAndSign?pt(f.hashAndSign(o,u,"binary","base64",s)):s?g(f.signStringPSS(u,o)):g(f.signString(u,o))}function s(n,t,u,f){var e=new i,o,s;return e.readPrivateKeyFromPEMString(f),o=r(n),s=e.signString(u,o),s}this.parseJWS=function(n,t){var r,o,i,s;if(this.parsedJWS===undefined||!t&&this.parsedJWS.sigvalH===undefined){if(n.match(/^([^.]+)\.([^.]+)\.([^.]+)$/)==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var u=RegExp.$1,f=RegExp.$2,h=RegExp.$3,c=u+"."+f;if(this.parsedJWS={},this.parsedJWS.headB64U=u,this.parsedJWS.payloadB64U=f,this.parsedJWS.sigvalB64U=h,this.parsedJWS.si=c,t||(r=ii(h),o=e(r,16),this.parsedJWS.sigvalH=r,this.parsedJWS.sigvalBI=o),i=ct(u),s=ct(f),this.parsedJWS.headS=i,this.parsedJWS.payloadS=s,!KJUR.jws.JWS.isSafeJSONString(i,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+i;}};this.verifyJWSByNE=function(n,t,i){return this.parseJWS(n),gi(this.parsedJWS.si,this.parsedJWS.sigvalBI,t,i)};this.verifyJWSByKey=function(n,i){this.parseJWS(n);var r=t(this.parsedJWS.headP),u=this.parsedJWS.headP.alg.substr(0,2)=="PS";return i.hashAndVerify?i.hashAndVerify(r,new Buffer(this.parsedJWS.si,"utf8").toString("base64"),wt(this.parsedJWS.sigvalB64U),"base64",u):u?i.verifyStringPSS(this.parsedJWS.si,this.parsedJWS.sigvalH,r):i.verifyString(this.parsedJWS.si,this.parsedJWS.sigvalH)};this.verifyJWSByPemX509Cert=function(n,t){this.parseJWS(n);var i=new u;return i.readCertPEM(t),i.subjectPublicKeyRSA.verifyString(this.parsedJWS.si,this.parsedJWS.sigvalH)};this.generateJWSByNED=function(t,i,r,u,e){if(!KJUR.jws.JWS.isSafeJSONString(t))throw"JWS Head is not safe JSON string: "+t;var o=n(t,i),h=f(t,i,o,r,u,e),s=g(h);return this.parsedJWS={},this.parsedJWS.headB64U=o.split(".")[0],this.parsedJWS.payloadB64U=o.split(".")[1],this.parsedJWS.sigvalB64U=s,o+"."+s};this.generateJWSByKey=function(t,i,r){var e={},u,f;if(!KJUR.jws.JWS.isSafeJSONString(t,e,"headP"))throw"JWS Head is not safe JSON string: "+t;return u=n(t,i),f=o(t,i,u,r,e.headP),this.parsedJWS={},this.parsedJWS.headB64U=u.split(".")[0],this.parsedJWS.payloadB64U=u.split(".")[1],this.parsedJWS.sigvalB64U=f,u+"."+f};this.generateJWSByP1PrvKey=function(t,i,r){if(!KJUR.jws.JWS.isSafeJSONString(t))throw"JWS Head is not safe JSON string: "+t;var u=n(t,i),e=s(t,i,u,r),f=g(e);return this.parsedJWS={},this.parsedJWS.headB64U=u.split(".")[0],this.parsedJWS.payloadB64U=u.split(".")[1],this.parsedJWS.sigvalB64U=f,u+"."+f}};KJUR.jws.JWS.sign=function(n,t,i,r,u){var s=KJUR.jws.JWS,o,f,l,e,a;if(!s.isSafeJSONString(t))throw"JWS Head is not safe JSON string: "+sHead;if(o=s.readSafeJSONString(t),(n==""||n==null)&&o.alg!==undefined&&(n=o.alg),n!=""&&n!=null&&o.alg===undefined&&(o.alg=n,t=JSON.stringify(o)),f=null,s.jwsalg2sigalg[n]===undefined)throw"unsupported alg name: "+n;else f=s.jwsalg2sigalg[n];var v=ft(t),y=ft(i),h=v+"."+y,c="";if(f.substr(0,4)=="Hmac"){if(r===undefined)throw"hexadecimal key shall be specified for HMAC";l=new KJUR.crypto.Mac({alg:f,pass:nt(r)});l.updateString(h);c=l.doFinal()}else f.indexOf("withECDSA")!=-1?(e=new KJUR.crypto.Signature({alg:f}),e.init(r,u),e.updateString(h),hASN1Sig=e.sign(),c=KJUR.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):f!="none"&&(e=new KJUR.crypto.Signature({alg:f}),e.init(r,u),e.updateString(h),c=e.sign());return a=g(c),h+"."+a};KJUR.jws.JWS.verify=function(n,t){var f=KJUR.jws.JWS,u=n.split("."),a=u[0],v=u[1],e=a+"."+v,o=ii(u[2]),s=f.readSafeJSONString(ct(u[0])),h=null,i,c,l,r;if(s.alg===undefined)throw"algorithm not specified in header";else h=s.alg;if(i=null,f.jwsalg2sigalg[s.alg]===undefined)throw"unsupported alg name: "+h;else i=f.jwsalg2sigalg[h];if(i=="none")return!0;if(i.substr(0,4)=="Hmac"){if(t===undefined)throw"hexadecimal key shall be specified for HMAC";return c=new KJUR.crypto.Mac({alg:i,pass:nt(t)}),c.updateString(e),hSig2=c.doFinal(),o==hSig2}if(i.indexOf("withECDSA")!=-1){l=null;try{l=KJUR.crypto.ECDSA.concatSigToASN1Sig(o)}catch(y){return!1}return r=new KJUR.crypto.Signature({alg:i}),r.init(t),r.updateString(e),r.verify(l)}return r=new KJUR.crypto.Signature({alg:i}),r.init(t),r.updateString(e),r.verify(o)};KJUR.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};KJUR.jws.JWS.isSafeJSONString=function(n,t,i){var r=null;try{return(r=at(n),typeof r!="object")?0:r.constructor===Array?0:(t&&(t[i]=r),1)}catch(u){return 0}};KJUR.jws.JWS.readSafeJSONString=function(n){var t=null;try{return(t=at(n),typeof t!="object")?null:t.constructor===Array?null:t}catch(i){return null}};KJUR.jws.JWS.getEncodedSignatureValueFromJWS=function(n){if(n.match(/^[^.]+\.[^.]+\.([^.]+)$/)==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return RegExp.$1};KJUR.jws.IntDate=function(){};KJUR.jws.IntDate.get=function(n){if(n=="now")return KJUR.jws.IntDate.getNow();if(n=="now + 1hour")return KJUR.jws.IntDate.getNow()+3600;if(n=="now + 1day")return KJUR.jws.IntDate.getNow()+86400;if(n=="now + 1month")return KJUR.jws.IntDate.getNow()+2592e3;if(n=="now + 1year")return KJUR.jws.IntDate.getNow()+31536e3;if(n.match(/Z$/))return KJUR.jws.IntDate.getZulu(n);if(n.match(/^[0-9]+$/))return parseInt(n);throw"unsupported format: "+n;};KJUR.jws.IntDate.getZulu=function(n){if(a=n.match(/(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)Z/)){var t=parseInt(RegExp.$1),i=parseInt(RegExp.$2)-1,r=parseInt(RegExp.$3),u=parseInt(RegExp.$4),f=parseInt(RegExp.$5),e=parseInt(RegExp.$6),o=new Date(Date.UTC(t,i,r,u,f,e));return~~(o/1e3)}throw"unsupported format: "+n;};KJUR.jws.IntDate.getNow=function(){return~~(new Date/1e3)};KJUR.jws.IntDate.intDate2UTCString=function(n){var t=new Date(n*1e3);return t.toUTCString()};KJUR.jws.IntDate.intDate2Zulu=function(n){var t=new Date(n*1e3),i=("0000"+t.getUTCFullYear()).slice(-4),r=("00"+(t.getUTCMonth()+1)).slice(-2),u=("00"+t.getUTCDate()).slice(-2),f=("00"+t.getUTCHours()).slice(-2),e=("00"+t.getUTCMinutes()).slice(-2),o=("00"+t.getUTCSeconds()).slice(-2);return i+r+u+f+e+o+"Z"},function(){"use strict";function ht(n){return typeof n=="function"||typeof n=="object"&&n!==null}function a(n){return typeof n=="function"}function ct(n){return typeof n=="object"&&n!==null}function nt(){}function lt(){return function(){process.nextTick(v)}}function at(){var n=0,i=new st(v),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function vt(){var n=new MessageChannel;return n.port1.onmessage=v,function(){n.port2.postMessage(0)}}function yt(){return function(){setTimeout(v,1)}}function v(){for(var t,i,n=0;n<c;n+=2)t=u[n],i=u[n+1],t(i),u[n]=undefined,u[n+1]=undefined;c=0}function s(){}function pt(){return new TypeError("You cannot resolve a promise with itself")}function wt(){return new TypeError("A promises callback cannot return that same promise.")}function bt(n){try{return n.then}catch(t){return b.error=t,b}}function kt(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function dt(i,r,u){l(function(i){var f=!1,e=kt(u,r,function(n){f||(f=!0,r!==n?h(i,n):t(i,n))},function(t){f||(f=!0,n(i,t))},"Settle: "+(i._label||" unknown promise"));!f&&e&&(f=!0,n(i,e))},i)}function gt(i,r){r._state===e?t(i,r._result):i._state===o?n(i,r._result):y(r,undefined,function(n){h(i,n)},function(t){n(i,t)})}function ni(i,r){if(r.constructor===i.constructor)gt(i,r);else{var u=bt(r);u===b?n(i,b.error):u===undefined?t(i,r):a(u)?dt(i,r,u):t(i,r)}}function h(i,r){i===r?n(i,pt()):ht(r)?ni(i,r):t(i,r)}function ti(n){n._onerror&&n._onerror(n._result);k(n)}function t(n,t){n._state===f&&(n._result=t,n._state=e,n._subscribers.length===0||l(k,n))}function n(n,t){n._state===f&&(n._state=o,n._result=t,l(ti,n))}function y(n,t,i,r){var u=n._subscribers,f=u.length;n._onerror=null;u[f]=t;u[f+e]=i;u[f+o]=r;f===0&&n._state&&l(k,n)}function k(n){var i=n._subscribers,e=n._state,r,u,f,t;if(i.length!==0){for(f=n._result,t=0;t<i.length;t+=3)r=i[t],u=i[t+e],r?it(e,r,u,f):u(f);n._subscribers.length=0}}function tt(){this.error=null}function ii(n,t){try{return n(t)}catch(i){return p.error=i,p}}function it(i,r,u,s){var v=a(u),c,y,l,w;if(v){if(c=ii(u,s),c===p?(w=!0,y=c.error,c=null):l=!0,r===c){n(r,wt());return}}else c=s,l=!0;r._state!==f||(v&&l?h(r,c):w?n(r,y):i===e?t(r,c):i===o&&n(r,c))}function ri(t,i){try{i(function(n){h(t,n)},function(i){n(t,i)})}catch(r){n(t,r)}}function i(i,r,u,f){this._instanceConstructor=i;this.promise=new i(s,f);this._abortOnReject=u;this._validateInput(r)?(this._input=r,this.length=r.length,this._remaining=r.length,this._init(),this.length===0?t(this.promise,this._result):(this.length=this.length||0,this._enumerate(),this._remaining===0&&t(this.promise,this._result))):n(this.promise,this._validationError())}function ui(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function fi(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function r(n,t){this._id=ai++;this._label=t;this._state=undefined;this._result=undefined;this._subscribers=[];s!==n&&(a(n)||ui(),this instanceof r||fi(),ri(this,n))}var rt,d,ei,u,ut,p,ft,g,et,w;rt=Array.isArray?Array.isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"};d=rt;ei=Date.now||function(){return(new Date).getTime()};var vi=Object.create||function(n){if(arguments.length>1)throw new Error("Second argument not supported");if(typeof n!="object")throw new TypeError("Argument must be an object");return nt.prototype=n,new nt},c=0,l=function(n,t){u[c]=n;u[c+1]=t;c+=2;c===2&&ut()},ot=typeof window!="undefined"?window:{},st=ot.MutationObserver||ot.WebKitMutationObserver,oi=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";u=new Array(1e3);ut=typeof process!="undefined"&&{}.toString.call(process)==="[object process]"?lt():st?at():oi?vt():yt();var f=void 0,e=1,o=2,b=new tt;p=new tt;i.prototype._validateInput=function(n){return d(n)};i.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};i.prototype._init=function(){this._result=new Array(this.length)};ft=i;i.prototype._enumerate=function(){for(var t=this.length,i=this.promise,r=this._input,n=0;i._state===f&&n<t;n++)this._eachEntry(r[n],n)};i.prototype._eachEntry=function(n,t){var i=this._instanceConstructor;ct(n)?n.constructor===i&&n._state!==f?(n._onerror=null,this._settledAt(n._state,t,n._result)):this._willSettleAt(i.resolve(n),t):(this._remaining--,this._result[t]=this._makeResult(e,t,n))};i.prototype._settledAt=function(i,r,u){var e=this.promise;e._state===f&&(this._remaining--,this._abortOnReject&&i===o?n(e,u):this._result[r]=this._makeResult(i,r,u));this._remaining===0&&t(e,this._result)};i.prototype._makeResult=function(n,t,i){return i};i.prototype._willSettleAt=function(n,t){var i=this;y(n,undefined,function(n){i._settledAt(e,t,n)},function(n){i._settledAt(o,t,n)})};var si=function(n,t){return new ft(this,n,!0,t).promise},hi=function(t,i){function c(n){h(r,n)}function l(t){n(r,t)}var e=this,r=new e(s,i),o,u;if(!d(t))return n(r,new TypeError("You must pass an array to race.")),r;for(o=t.length,u=0;r._state===f&&u<o;u++)y(e.resolve(t[u]),undefined,c,l);return r},ci=function(n,t){var r=this,i;return n&&typeof n=="object"&&n.constructor===r?n:(i=new r(s,t),h(i,n),i)},li=function(t,i){var u=this,r=new u(s,i);return n(r,t),r},ai=0;g=r;r.all=si;r.race=hi;r.resolve=ci;r.reject=li;r.prototype={constructor:r,then:function(n,t,i){var u=this,r=u._state,f,h,c;return r===e&&!n||r===o&&!t?this:(u._onerror=null,f=new this.constructor(s,i),h=u._result,r?(c=arguments[r-1],l(function(){it(r,f,c,h)})):y(u,f,n,t),f)},"catch":function(n,t){return this.then(null,n,t)}};et=function(){var n,t;n=typeof global!="undefined"?global:typeof window!="undefined"&&window.document?window:self;t="Promise"in n&&"resolve"in n.Promise&&"reject"in n.Promise&&"all"in n.Promise&&"race"in n.Promise&&function(){var t;return new n.Promise(function(n){t=n}),a(t)}();t||(n.Promise=g)};w={Promise:g,polyfill:et};typeof define=="function"&&define.amd?define(function(){return w}):typeof module!="undefined"&&module.exports?module.exports=w:typeof this!="undefined"&&(this.ES6Promise=w);window.Promise=window.Promise||this.ES6Promise.Promise}.call(this);dt="OidcClient.requestDataKey";s.prototype.redirectForToken=function(){c("OidcClient.redirectForToken");this.createTokenRequestAsync().then(function(n){window.location=n.url},function(n){console.error(n)})};s.prototype.redirectForLogout=function(n){c("OidcClient.redirectForLogout");var t=this._settings;this.loadMetadataAsync().then(function(i){i.end_session_endpoint||console.error("No end_session_endpoint in metadata");var r=i.end_session_endpoint;n&&t.post_logout_redirect_uri&&(r+="?post_logout_redirect_uri="+t.post_logout_redirect_uri,r+="&id_token_hint="+n);window.location=r},function(n){console.error(n)})};s.prototype.loadAuthorizationEndpoint=function(){return(c("OidcClient.loadAuthorizationEndpoint"),this._settings.authorization_endpoint)?Promise.resolve(this._settings.authorization_endpoint):this._settings.authority?this.loadMetadataAsync().then(function(n){return n.authorization_endpoint?n.authorization_endpoint:f("Metadata does not contain authorization_endpoint")}):f("No authorization_endpoint configured")};s.prototype.createTokenRequestAsync=function(){c("OidcClient.createTokenRequestAsync");var n=this,t=n._settings;return n.loadAuthorizationEndpoint().then(function(i){var e=sr(),r=i+"?state="+encodeURIComponent(e),u,o,s,f;return n.isOidc&&(u=sr(),r+="&nonce="+encodeURIComponent(u)),o=["client_id","redirect_uri","response_type","scope"],o.forEach(function(n){var i=t[n];i&&(r+="&"+n+"="+encodeURIComponent(i))}),s=["prompt","display","max_age","ui_locales","id_token_hint","login_hint","acr_values"],s.forEach(function(n){var i=t[n];i&&(r+="&"+n+"="+encodeURIComponent(i))}),f={oidc:n.isOidc,oauth:n.isOAuth,state:e},u&&(f.nonce=u),t.store.setItem(dt,JSON.stringify(f)),{data:f,url:r}})};s.prototype.loadMetadataAsync=function(){c("OidcClient.loadMetadataAsync");var n=this._settings;return n.metadata?Promise.resolve(n.metadata):n.authority?oi(n.authority).then(function(t){return n.metadata=t,t},function(n){return f("Failed to load metadata ("+n.message+")")}):f("No authority configured")};s.prototype.loadX509SigningKeyAsync=function(){function t(n){if(!n.keys||!n.keys.length)return f("Signing keys empty");var t=n.keys[0];return t.kty!="RSA"?f("Signing key not RSA"):!t.x5c||!t.x5c.length?f("RSA keys empty"):Promise.resolve(t.x5c[0])}c("OidcClient.loadX509SigningKeyAsync");var n=this._settings;return n.jwks?t(n.jwks):this.loadMetadataAsync().then(function(i){return i.jwks_uri?oi(i.jwks_uri).then(function(i){return n.jwks=i,t(i)},function(n){return f("Failed to load signing keys ("+n.message+")")}):f("Metadata does not contain jwks_uri")})};s.prototype.validateIdTokenAsync=function(n,t,i){c("OidcClient.validateIdTokenAsync");var r=this,u=r._settings;return r.loadX509SigningKeyAsync().then(function(e){var s=new KJUR.jws.JWS,o;return s.verifyJWSByPemX509Cert(n,e)?(o=JSON.parse(s.parsedJWS.payloadS),t!==o.nonce)?f("Invalid nonce"):r.loadMetadataAsync().then(function(n){if(o.iss!==n.issuer)return f("Invalid issuer");if(o.aud!==u.client_id)return f("Invalid audience");var t=parseInt(Date.now()/1e3),e=t-o.iat;return e>300?f("Token issued too long ago"):o.exp<t?f("Token expired"):i&&u.load_user_profile?r.loadUserProfile(i,o).then(function(n){return n}):o}):f("JWT failed to validate")})};s.prototype.validateAccessTokenAsync=function(n,t){if(c("OidcClient.validateAccessTokenAsync"),!n.at_hash)return f("No at_hash in id_token");var i=KJUR.crypto.Util.sha256(t),r=i.substr(0,i.length/2),u=g(r);return u!==n.at_hash?f("at_hash failed to validate"):Promise.resolve()};s.prototype.loadUserProfile=function(n,t){return c("OidcClient.loadUserProfile"),this.loadMetadataAsync().then(function(i){return i.userinfo_endpoint?oi(i.userinfo_endpoint,n).then(function(n){return or(n,t)}):Promise.reject(Error("Metadata does not contain userinfo_endpoint"))})};s.prototype.validateIdTokenAndAccessTokenAsync=function(n,t,i){c("OidcClient.validateIdTokenAndAccessTokenAsync");var r=this;return r.validateIdTokenAsync(n,t,i).then(function(n){return r.validateAccessTokenAsync(n,i).then(function(){return n})})};s.prototype.readResponseAsync=function(n){var t,r;c("OidcClient.readResponseAsync");var u=this,e=u._settings,i=e.store.getItem(dt);if((e.store.removeItem(dt),!i)||(i=JSON.parse(i),!i))return f("No request state loaded");if(!i.state)return f("No state loaded");if(t=lh(n),!t)return f("No OIDC response");if(t.error)return f(t.error);if(t.state!==i.state)return f("Invalid state");if(i.oidc){if(!t.id_token)return f("No identity token");if(!i.nonce)return f("No nonce loaded")}if(i.oauth){if(!t.access_token)return f("No access token");if(t.token_type!=="Bearer")return f("Invalid token type");if(!t.expires_in)return f("No token expiration")}return r=Promise.resolve(),i.oidc&&i.oauth?r=u.validateIdTokenAndAccessTokenAsync(t.id_token,i.nonce,t.access_token):i.oidc&&(r=u.validateIdTokenAsync(t.id_token,i.nonce)),r.then(function(n){return{id_token:n,id_token_jwt:t.id_token,access_token:t.access_token,expires_in:t.expires_in}})};p.fromResponse=function(n){if(n.access_token)var t=parseInt(Date.now()/1e3),i=t+parseInt(n.expires_in);return new p(n.id_token,n.id_token_jwt,n.access_token,i)};p.fromJSON=function(n){if(n)try{var t=JSON.parse(n);return new p(t.id_token,t.id_token_jwt,t.access_token,t.expires_at)}catch(i){}return new p(null,0,null)};p.prototype.toJSON=function(){return JSON.stringify({id_token:this.id_token,id_token_jwt:this.id_token_jwt,access_token:this.access_token,expires_at:this.expires_at})};hr.prototype.loadAsync=function(n){return(n=n||this.url,!n)?Promise.reject("No url provided"):new Promise(function(t,i){function f(){window.removeEventListener("message",e,!1);r&&window.clearTimeout(r);r=null;u.remove()}function o(){f();i()}function e(n){r&&n.origin===location.protocol+"//"+location.host&&(f(),t(n.data))}var u=$('<iframe style="display:none"><\/iframe>').appendTo("body"),r=window.setTimeout(o,5e3);window.addEventListener("message",e,!1);u.attr("src",n)})};lt="TokenManager.token";h.setPromiseFactory=function(n){ch=n};h.setHttpRequest=function(n){er=n};h.prototype.saveToken=function(n){!n||n instanceof p||(n=p.fromResponse(n));this._token=n;this._settings.persist&&!this.expired?this._settings.store.setItem(lt,n.toJSON()):this._settings.store.removeItem(lt);n?ar(this):lr(this)};h.prototype.addOnTokenRemoved=function(n){this._callbacks.tokenRemovedCallbacks.push(n)};h.prototype.addOnTokenObtained=function(n){this._callbacks.tokenObtainedCallbacks.push(n)};h.prototype.addOnTokenExpiring=function(n){this._callbacks.tokenExpiringCallbacks.push(n)};h.prototype.addOnTokenExpired=function(n){this._callbacks.tokenExpiredCallbacks.push(n)};h.prototype.removeToken=function(){this.saveToken(null)};h.prototype.redirectForToken=function(){var n=new s(this._settings);n.redirectForToken()};h.prototype.redirectForLogout=function(){var n=new s(this._settings),t=this.id_token_jwt;this.removeToken();n.redirectForLogout(t)};h.prototype.createTokenRequestAsync=function(){var n=new s(this._settings);return n.createTokenRequestAsync()};h.prototype.processTokenCallbackAsync=function(n){var t=this,i=new s(t._settings);return i.readResponseAsync(n).then(function(n){t.saveToken(n)})};h.prototype.renewTokenSilentAsync=function(){var t=this,n,i;return t._settings.silent_redirect_uri?(n=or(t._settings),n.redirect_uri=n.silent_redirect_uri,n.prompt="none",i=new s(n),i.createTokenRequestAsync().then(function(n){var r=new hr(n.url);return r.loadAsync().then(function(n){return i.readResponseAsync(n).then(function(n){t.saveToken(n)})})})):Promise.reject("silent_redirect_uri not configured")};h.prototype.processTokenCallbackSilent=function(){if(window.top&&window!==window.top){var n=window.location.hash;n&&window.top.postMessage(n,location.protocol+"//"+location.host)}};window.TokenManager=h})();
//# sourceMappingURL=oidc.min.js.map
